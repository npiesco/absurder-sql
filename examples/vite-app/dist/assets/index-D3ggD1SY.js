(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(a){if(a.ep)return;a.ep=!0;const s=r(a);fetch(a.href,s)}})();let wasm,cachedUint8ArrayMemory0=null;function getUint8ArrayMemory0(){return(cachedUint8ArrayMemory0===null||cachedUint8ArrayMemory0.byteLength===0)&&(cachedUint8ArrayMemory0=new Uint8Array(wasm.memory.buffer)),cachedUint8ArrayMemory0}let cachedTextDecoder=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0});cachedTextDecoder.decode();const MAX_SAFARI_DECODE_BYTES=2146435072;let numBytesDecoded=0;function decodeText(e,t){return numBytesDecoded+=t,numBytesDecoded>=MAX_SAFARI_DECODE_BYTES&&(cachedTextDecoder=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}),cachedTextDecoder.decode(),numBytesDecoded=t),cachedTextDecoder.decode(getUint8ArrayMemory0().subarray(e,e+t))}function getStringFromWasm0(e,t){return e=e>>>0,decodeText(e,t)}let WASM_VECTOR_LEN=0;const cachedTextEncoder=new TextEncoder;"encodeInto"in cachedTextEncoder||(cachedTextEncoder.encodeInto=function(e,t){const r=cachedTextEncoder.encode(e);return t.set(r),{read:e.length,written:r.length}});function passStringToWasm0(e,t,r){if(r===void 0){const i=cachedTextEncoder.encode(e),_=t(i.length,1)>>>0;return getUint8ArrayMemory0().subarray(_,_+i.length).set(i),WASM_VECTOR_LEN=i.length,_}let n=e.length,a=t(n,1)>>>0;const s=getUint8ArrayMemory0();let o=0;for(;o<n;o++){const i=e.charCodeAt(o);if(i>127)break;s[a+o]=i}if(o!==n){o!==0&&(e=e.slice(o)),a=r(a,n,n=o+e.length*3,1)>>>0;const i=getUint8ArrayMemory0().subarray(a+o,a+n),_=cachedTextEncoder.encodeInto(e,i);o+=_.written,a=r(a,n,o,1)>>>0}return WASM_VECTOR_LEN=o,a}let cachedDataViewMemory0=null;function getDataViewMemory0(){return(cachedDataViewMemory0===null||cachedDataViewMemory0.buffer.detached===!0||cachedDataViewMemory0.buffer.detached===void 0&&cachedDataViewMemory0.buffer!==wasm.memory.buffer)&&(cachedDataViewMemory0=new DataView(wasm.memory.buffer)),cachedDataViewMemory0}function isLikeNone(e){return e==null}function debugString(e){const t=typeof e;if(t=="number"||t=="boolean"||e==null)return`${e}`;if(t=="string")return`"${e}"`;if(t=="symbol"){const a=e.description;return a==null?"Symbol":`Symbol(${a})`}if(t=="function"){const a=e.name;return typeof a=="string"&&a.length>0?`Function(${a})`:"Function"}if(Array.isArray(e)){const a=e.length;let s="[";a>0&&(s+=debugString(e[0]));for(let o=1;o<a;o++)s+=", "+debugString(e[o]);return s+="]",s}const r=/\[object ([^\]]+)\]/.exec(toString.call(e));let n;if(r&&r.length>1)n=r[1];else return toString.call(e);if(n=="Object")try{return"Object("+JSON.stringify(e)+")"}catch{return"Object"}return e instanceof Error?`${e.name}: ${e.message}
${e.stack}`:n}function addToExternrefTable0(e){const t=wasm.__externref_table_alloc();return wasm.__wbindgen_externrefs.set(t,e),t}function handleError(e,t){try{return e.apply(this,t)}catch(r){const n=addToExternrefTable0(r);wasm.__wbindgen_exn_store(n)}}function getArrayU8FromWasm0(e,t){return e=e>>>0,getUint8ArrayMemory0().subarray(e/1,e/1+t)}const CLOSURE_DTORS=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(e=>e.dtor(e.a,e.b));function makeMutClosure(e,t,r,n){const a={a:e,b:t,cnt:1,dtor:r},s=(...o)=>{a.cnt++;const i=a.a;a.a=0;try{return n(i,a.b,...o)}finally{a.a=i,s._wbg_cb_unref()}};return s._wbg_cb_unref=()=>{--a.cnt===0&&(a.dtor(a.a,a.b),a.a=0,CLOSURE_DTORS.unregister(a))},CLOSURE_DTORS.register(s,a,a),s}function takeFromExternrefTable0(e){const t=wasm.__wbindgen_externrefs.get(e);return wasm.__externref_table_dealloc(e),t}function wasm_bindgen__convert__closures_____invoke__h461a9f3a02628bdb(e,t,r){wasm.wasm_bindgen__convert__closures_____invoke__h461a9f3a02628bdb(e,t,r)}function wasm_bindgen__convert__closures_____invoke__h3ba5f0fbfb39f2bc(e,t,r){wasm.wasm_bindgen__convert__closures_____invoke__h3ba5f0fbfb39f2bc(e,t,r)}function wasm_bindgen__convert__closures_____invoke__h183d48ae9af1b9ef(e,t){wasm.wasm_bindgen__convert__closures_____invoke__h183d48ae9af1b9ef(e,t)}function wasm_bindgen__convert__closures_____invoke__h5d89cc2ab3b3e449(e,t,r){return wasm.wasm_bindgen__convert__closures_____invoke__h5d89cc2ab3b3e449(e,t,r)}function wasm_bindgen__convert__closures_____invoke__h0645e20ee34c432f(e,t,r,n){wasm.wasm_bindgen__convert__closures_____invoke__h0645e20ee34c432f(e,t,r,n)}const __wbindgen_enum_IdbTransactionMode=["readonly","readwrite","versionchange","readwriteflush","cleanup"],DatabaseFinalization=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(e=>wasm.__wbg_database_free(e>>>0,1));class Database{static __wrap(t){t=t>>>0;const r=Object.create(Database.prototype);return r.__wbg_ptr=t,DatabaseFinalization.register(r,r.__wbg_ptr,r),r}__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,DatabaseFinalization.unregister(this),t}free(){const t=this.__destroy_into_raw();wasm.__wbg_database_free(t,0)}static newDatabase(t){const r=passStringToWasm0(t,wasm.__wbindgen_malloc,wasm.__wbindgen_realloc),n=WASM_VECTOR_LEN;return wasm.database_newDatabase(r,n)}get name(){let t,r;try{const n=wasm.database_name(this.__wbg_ptr);return t=n[0],r=n[1],getStringFromWasm0(n[0],n[1])}finally{wasm.__wbindgen_free(t,r,1)}}static getAllDatabases(){return wasm.database_getAllDatabases()}static deleteDatabase(t){const r=passStringToWasm0(t,wasm.__wbindgen_malloc,wasm.__wbindgen_realloc),n=WASM_VECTOR_LEN;return wasm.database_deleteDatabase(r,n)}execute(t){const r=passStringToWasm0(t,wasm.__wbindgen_malloc,wasm.__wbindgen_realloc),n=WASM_VECTOR_LEN;return wasm.database_execute(this.__wbg_ptr,r,n)}executeWithParams(t,r){const n=passStringToWasm0(t,wasm.__wbindgen_malloc,wasm.__wbindgen_realloc),a=WASM_VECTOR_LEN;return wasm.database_executeWithParams(this.__wbg_ptr,n,a,r)}close(){return wasm.database_close(this.__wbg_ptr)}forceCloseConnection(){return wasm.database_forceCloseConnection(this.__wbg_ptr)}sync(){return wasm.database_sync(this.__wbg_ptr)}allowNonLeaderWrites(t){return wasm.database_allowNonLeaderWrites(this.__wbg_ptr,t)}exportToFile(){return wasm.database_exportToFile(this.__wbg_ptr)}testLock(t){return wasm.database_testLock(this.__wbg_ptr,t)}importFromFile(t){return wasm.database_importFromFile(this.__wbg_ptr,t)}waitForLeadership(){return wasm.database_waitForLeadership(this.__wbg_ptr)}requestLeadership(){return wasm.database_requestLeadership(this.__wbg_ptr)}getLeaderInfo(){return wasm.database_getLeaderInfo(this.__wbg_ptr)}queueWrite(t){const r=passStringToWasm0(t,wasm.__wbindgen_malloc,wasm.__wbindgen_realloc),n=WASM_VECTOR_LEN;return wasm.database_queueWrite(this.__wbg_ptr,r,n)}queueWriteWithTimeout(t,r){const n=passStringToWasm0(t,wasm.__wbindgen_malloc,wasm.__wbindgen_realloc),a=WASM_VECTOR_LEN;return wasm.database_queueWriteWithTimeout(this.__wbg_ptr,n,a,r)}isLeader(){return wasm.database_isLeader(this.__wbg_ptr)}is_leader(){return wasm.database_is_leader(this.__wbg_ptr)}onDataChange(t){const r=wasm.database_onDataChange(this.__wbg_ptr,t);if(r[1])throw takeFromExternrefTable0(r[0])}enableOptimisticUpdates(t){return wasm.database_enableOptimisticUpdates(this.__wbg_ptr,t)}isOptimisticMode(){return wasm.database_isOptimisticMode(this.__wbg_ptr)}trackOptimisticWrite(t){const r=passStringToWasm0(t,wasm.__wbindgen_malloc,wasm.__wbindgen_realloc),n=WASM_VECTOR_LEN;return wasm.database_trackOptimisticWrite(this.__wbg_ptr,r,n)}getPendingWritesCount(){return wasm.database_getPendingWritesCount(this.__wbg_ptr)}clearOptimisticWrites(){return wasm.database_clearOptimisticWrites(this.__wbg_ptr)}enableCoordinationMetrics(t){return wasm.database_enableCoordinationMetrics(this.__wbg_ptr,t)}isCoordinationMetricsEnabled(){return wasm.database_isCoordinationMetricsEnabled(this.__wbg_ptr)}recordLeadershipChange(t){return wasm.database_recordLeadershipChange(this.__wbg_ptr,t)}recordNotificationLatency(t){return wasm.database_recordNotificationLatency(this.__wbg_ptr,t)}recordWriteConflict(){return wasm.database_recordWriteConflict(this.__wbg_ptr)}recordFollowerRefresh(){return wasm.database_recordFollowerRefresh(this.__wbg_ptr)}getCoordinationMetrics(){return wasm.database_getCoordinationMetrics(this.__wbg_ptr)}resetCoordinationMetrics(){return wasm.database_resetCoordinationMetrics(this.__wbg_ptr)}}Symbol.dispose&&(Database.prototype[Symbol.dispose]=Database.prototype.free);typeof FinalizationRegistry>"u"||new FinalizationRegistry(e=>wasm.__wbg_wasmcolumnvalue_free(e>>>0,1));const EXPECTED_RESPONSE_TYPES=new Set(["basic","cors","default"]);async function __wbg_load(e,t){if(typeof Response=="function"&&e instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(e,t)}catch(n){if(e.ok&&EXPECTED_RESPONSE_TYPES.has(e.type)&&e.headers.get("Content-Type")!=="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve Wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",n);else throw n}const r=await e.arrayBuffer();return await WebAssembly.instantiate(r,t)}else{const r=await WebAssembly.instantiate(e,t);return r instanceof WebAssembly.Instance?{instance:r,module:e}:r}}function __wbg_get_imports(){const imports={};return imports.wbg={},imports.wbg.__wbg_Error_e83987f665cf5504=function(e,t){return Error(getStringFromWasm0(e,t))},imports.wbg.__wbg_Number_bb48ca12f395cd08=function(e){return Number(e)},imports.wbg.__wbg_String_8f0eb39a4a4c2f66=function(e,t){const r=String(t),n=passStringToWasm0(r,wasm.__wbindgen_malloc,wasm.__wbindgen_realloc),a=WASM_VECTOR_LEN;getDataViewMemory0().setInt32(e+4*1,a,!0),getDataViewMemory0().setInt32(e+4*0,n,!0)},imports.wbg.__wbg___wbindgen_bigint_get_as_i64_f3ebc5a755000afd=function(e,t){const r=t,n=typeof r=="bigint"?r:void 0;getDataViewMemory0().setBigInt64(e+8*1,isLikeNone(n)?BigInt(0):n,!0),getDataViewMemory0().setInt32(e+4*0,!isLikeNone(n),!0)},imports.wbg.__wbg___wbindgen_boolean_get_6d5a1ee65bab5f68=function(e){const t=e,r=typeof t=="boolean"?t:void 0;return isLikeNone(r)?16777215:r?1:0},imports.wbg.__wbg___wbindgen_debug_string_df47ffb5e35e6763=function(e,t){const r=debugString(t),n=passStringToWasm0(r,wasm.__wbindgen_malloc,wasm.__wbindgen_realloc),a=WASM_VECTOR_LEN;getDataViewMemory0().setInt32(e+4*1,a,!0),getDataViewMemory0().setInt32(e+4*0,n,!0)},imports.wbg.__wbg___wbindgen_in_bb933bd9e1b3bc0f=function(e,t){return e in t},imports.wbg.__wbg___wbindgen_is_bigint_cb320707dcd35f0b=function(e){return typeof e=="bigint"},imports.wbg.__wbg___wbindgen_is_function_ee8a6c5833c90377=function(e){return typeof e=="function"},imports.wbg.__wbg___wbindgen_is_null_5e69f72e906cc57c=function(e){return e===null},imports.wbg.__wbg___wbindgen_is_object_c818261d21f283a4=function(e){const t=e;return typeof t=="object"&&t!==null},imports.wbg.__wbg___wbindgen_is_string_fbb76cb2940daafd=function(e){return typeof e=="string"},imports.wbg.__wbg___wbindgen_is_undefined_2d472862bd29a478=function(e){return e===void 0},imports.wbg.__wbg___wbindgen_jsval_eq_6b13ab83478b1c50=function(e,t){return e===t},imports.wbg.__wbg___wbindgen_jsval_loose_eq_b664b38a2f582147=function(e,t){return e==t},imports.wbg.__wbg___wbindgen_number_get_a20bf9b85341449d=function(e,t){const r=t,n=typeof r=="number"?r:void 0;getDataViewMemory0().setFloat64(e+8*1,isLikeNone(n)?0:n,!0),getDataViewMemory0().setInt32(e+4*0,!isLikeNone(n),!0)},imports.wbg.__wbg___wbindgen_string_get_e4f06c90489ad01b=function(e,t){const r=t,n=typeof r=="string"?r:void 0;var a=isLikeNone(n)?0:passStringToWasm0(n,wasm.__wbindgen_malloc,wasm.__wbindgen_realloc),s=WASM_VECTOR_LEN;getDataViewMemory0().setInt32(e+4*1,s,!0),getDataViewMemory0().setInt32(e+4*0,a,!0)},imports.wbg.__wbg___wbindgen_throw_b855445ff6a94295=function(e,t){throw new Error(getStringFromWasm0(e,t))},imports.wbg.__wbg__wbg_cb_unref_2454a539ea5790d9=function(e){e._wbg_cb_unref()},imports.wbg.__wbg_bound_bcd18f6fa2e57078=function(){return handleError(function(e,t){return IDBKeyRange.bound(e,t)},arguments)},imports.wbg.__wbg_call_525440f72fbfc0ea=function(){return handleError(function(e,t,r){return e.call(t,r)},arguments)},imports.wbg.__wbg_call_e762c39fa8ea36bf=function(){return handleError(function(e,t){return e.call(t)},arguments)},imports.wbg.__wbg_cancelIdleCallback_415499de61339350=function(e,t){e.cancelIdleCallback(t>>>0)},imports.wbg.__wbg_catch_943836faa5d29bfb=function(e,t){return e.catch(t)},imports.wbg.__wbg_clearInterval_0675249bbe52da7b=function(e,t){e.clearInterval(t)},imports.wbg.__wbg_close_209083eb02f34c98=function(e){e.close()},imports.wbg.__wbg_close_74386af11ef5ae35=function(e){e.close()},imports.wbg.__wbg_contains_9f431f3a4577dba6=function(e,t,r){return e.contains(getStringFromWasm0(t,r))},imports.wbg.__wbg_continue_a31229352363abe4=function(){return handleError(function(e){e.continue()},arguments)},imports.wbg.__wbg_createObjectStore_7df0fb1da746f44d=function(){return handleError(function(e,t,r){return e.createObjectStore(getStringFromWasm0(t,r))},arguments)},imports.wbg.__wbg_data_ee4306d069f24f2d=function(e){return e.data},imports.wbg.__wbg_database_new=function(e){return Database.__wrap(e)},imports.wbg.__wbg_debug_f4b0c59db649db48=function(e){console.debug(e)},imports.wbg.__wbg_delete_eda273f9efee8e09=function(){return handleError(function(e){return e.delete()},arguments)},imports.wbg.__wbg_delete_f808c4661e8e34c0=function(){return handleError(function(e,t){return e.delete(t)},arguments)},imports.wbg.__wbg_document_725ae06eb442a6db=function(e){const t=e.document;return isLikeNone(t)?0:addToExternrefTable0(t)},imports.wbg.__wbg_done_2042aa2670fb1db1=function(e){return e.done},imports.wbg.__wbg_entries_e171b586f8f6bdbf=function(e){return Object.entries(e)},imports.wbg.__wbg_error_a7f8fbb0523dae15=function(e){console.error(e)},imports.wbg.__wbg_eval_89be3645cf120ed3=function(){return handleError(function(arg0,arg1){const ret=eval(getStringFromWasm0(arg0,arg1));return ret},arguments)},imports.wbg.__wbg_getDate_5a70d2f6a482d99f=function(e){return e.getDate()},imports.wbg.__wbg_getDay_a150a3fd757619d1=function(e){return e.getDay()},imports.wbg.__wbg_getFullYear_8240d5a15191feae=function(e){return e.getFullYear()},imports.wbg.__wbg_getHours_5e476e0b9ebc42d1=function(e){return e.getHours()},imports.wbg.__wbg_getItem_89f57d6acc51a876=function(){return handleError(function(e,t,r,n){const a=t.getItem(getStringFromWasm0(r,n));var s=isLikeNone(a)?0:passStringToWasm0(a,wasm.__wbindgen_malloc,wasm.__wbindgen_realloc),o=WASM_VECTOR_LEN;getDataViewMemory0().setInt32(e+4*1,o,!0),getDataViewMemory0().setInt32(e+4*0,s,!0)},arguments)},imports.wbg.__wbg_getMinutes_c95dfb65f1ea8f02=function(e){return e.getMinutes()},imports.wbg.__wbg_getMonth_25c1c5a601d72773=function(e){return e.getMonth()},imports.wbg.__wbg_getSeconds_8113bf8709718eb2=function(e){return e.getSeconds()},imports.wbg.__wbg_getTime_14776bfb48a1bff9=function(e){return e.getTime()},imports.wbg.__wbg_getTimezoneOffset_d391cb11d54969f8=function(e){return e.getTimezoneOffset()},imports.wbg.__wbg_get_7bed016f185add81=function(e,t){return e[t>>>0]},imports.wbg.__wbg_get_e7f29cbc382cd519=function(e,t,r){const n=t[r>>>0];var a=isLikeNone(n)?0:passStringToWasm0(n,wasm.__wbindgen_malloc,wasm.__wbindgen_realloc),s=WASM_VECTOR_LEN;getDataViewMemory0().setInt32(e+4*1,s,!0),getDataViewMemory0().setInt32(e+4*0,a,!0)},imports.wbg.__wbg_get_efcb449f58ec27c2=function(){return handleError(function(e,t){return Reflect.get(e,t)},arguments)},imports.wbg.__wbg_get_fb1fa70beb44a754=function(){return handleError(function(e,t){return e.get(t)},arguments)},imports.wbg.__wbg_get_with_ref_key_1dc361bd10053bfe=function(e,t){return e[t]},imports.wbg.__wbg_info_e674a11f4f50cc0c=function(e){console.info(e)},imports.wbg.__wbg_instanceof_ArrayBuffer_70beb1189ca63b38=function(e){let t;try{t=e instanceof ArrayBuffer}catch{t=!1}return t},imports.wbg.__wbg_instanceof_IdbDatabase_fcf75ffeeec3ec8c=function(e){let t;try{t=e instanceof IDBDatabase}catch{t=!1}return t},imports.wbg.__wbg_instanceof_IdbFactory_b39cfd3ab00cea49=function(e){let t;try{t=e instanceof IDBFactory}catch{t=!1}return t},imports.wbg.__wbg_instanceof_IdbOpenDbRequest_08e4929084e51476=function(e){let t;try{t=e instanceof IDBOpenDBRequest}catch{t=!1}return t},imports.wbg.__wbg_instanceof_Map_8579b5e2ab5437c7=function(e){let t;try{t=e instanceof Map}catch{t=!1}return t},imports.wbg.__wbg_instanceof_Uint8Array_20c8e73002f7af98=function(e){let t;try{t=e instanceof Uint8Array}catch{t=!1}return t},imports.wbg.__wbg_instanceof_Window_4846dbb3de56c84c=function(e){let t;try{t=e instanceof Window}catch{t=!1}return t},imports.wbg.__wbg_isArray_96e0af9891d0945d=function(e){return Array.isArray(e)},imports.wbg.__wbg_isSafeInteger_d216eda7911dde36=function(e){return Number.isSafeInteger(e)},imports.wbg.__wbg_iterator_e5822695327a3c39=function(){return Symbol.iterator},imports.wbg.__wbg_key_d84f6472d959b974=function(){return handleError(function(e){return e.key},arguments)},imports.wbg.__wbg_length_69bca3cb64fc8748=function(e){return e.length},imports.wbg.__wbg_length_a95b69f903b746c4=function(e){return e.length},imports.wbg.__wbg_length_cdd215e10d9dd507=function(e){return e.length},imports.wbg.__wbg_length_efec72473f10bc42=function(e){return e.length},imports.wbg.__wbg_localStorage_3034501cd2b3da3f=function(){return handleError(function(e){const t=e.localStorage;return isLikeNone(t)?0:addToExternrefTable0(t)},arguments)},imports.wbg.__wbg_log_8cec76766b8c0e33=function(e){console.log(e)},imports.wbg.__wbg_navigator_971384882e8ea23a=function(e){return e.navigator},imports.wbg.__wbg_new_0_f9740686d739025c=function(){return new Date},imports.wbg.__wbg_new_1acc0b6eea89d040=function(){return new Object},imports.wbg.__wbg_new_3c3d849046688a66=function(e,t){try{var r={a:e,b:t},n=(s,o)=>{const i=r.a;r.a=0;try{return wasm_bindgen__convert__closures_____invoke__h0645e20ee34c432f(i,r.b,s,o)}finally{r.a=i}};return new Promise(n)}finally{r.a=r.b=0}},imports.wbg.__wbg_new_5a79be3ab53b8aa5=function(e){return new Uint8Array(e)},imports.wbg.__wbg_new_67069b49258d9f2a=function(){return handleError(function(e,t){return new BroadcastChannel(getStringFromWasm0(e,t))},arguments)},imports.wbg.__wbg_new_93d9417ed3fb115d=function(e){return new Date(e)},imports.wbg.__wbg_new_e17d9f43105b08be=function(){return new Array},imports.wbg.__wbg_new_from_slice_92f4d78ca282a2d2=function(e,t){return new Uint8Array(getArrayU8FromWasm0(e,t))},imports.wbg.__wbg_new_no_args_ee98eee5275000a4=function(e,t){return new Function(getStringFromWasm0(e,t))},imports.wbg.__wbg_new_with_length_01aa0dc35aa13543=function(e){return new Uint8Array(e>>>0)},imports.wbg.__wbg_new_with_year_month_day_6236812cf591750d=function(e,t,r){return new Date(e>>>0,t,r)},imports.wbg.__wbg_next_020810e0ae8ebcb0=function(){return handleError(function(e){return e.next()},arguments)},imports.wbg.__wbg_next_2c826fe5dfec6b6a=function(e){return e.next},imports.wbg.__wbg_now_793306c526e2e3b6=function(){return Date.now()},imports.wbg.__wbg_objectStoreNames_cfcd75f76eff34e4=function(e){return e.objectStoreNames},imports.wbg.__wbg_objectStore_2aab1d8b165c62a6=function(){return handleError(function(e,t,r){return e.objectStore(getStringFromWasm0(t,r))},arguments)},imports.wbg.__wbg_openCursor_da22e71977afb7d7=function(){return handleError(function(e,t){return e.openCursor(t)},arguments)},imports.wbg.__wbg_open_9d8c51d122a5a6ea=function(){return handleError(function(e,t,r,n){return e.open(getStringFromWasm0(t,r),n>>>0)},arguments)},imports.wbg.__wbg_parse_2a704d6b78abb2b8=function(){return handleError(function(e,t){return JSON.parse(getStringFromWasm0(e,t))},arguments)},imports.wbg.__wbg_postMessage_2e1248c7fe808340=function(){return handleError(function(e,t){e.postMessage(t)},arguments)},imports.wbg.__wbg_prototypesetcall_2a6620b6922694b2=function(e,t,r){Uint8Array.prototype.set.call(getArrayU8FromWasm0(e,t),r)},imports.wbg.__wbg_push_df81a39d04db858c=function(e,t){return e.push(t)},imports.wbg.__wbg_put_88678dd575c85637=function(){return handleError(function(e,t,r){return e.put(t,r)},arguments)},imports.wbg.__wbg_queueMicrotask_34d692c25c47d05b=function(e){return e.queueMicrotask},imports.wbg.__wbg_queueMicrotask_9d76cacb20c84d58=function(e){queueMicrotask(e)},imports.wbg.__wbg_random_babe96ffc73e60a2=function(){return Math.random()},imports.wbg.__wbg_removeEventListener_aa21ef619e743518=function(){return handleError(function(e,t,r,n){e.removeEventListener(getStringFromWasm0(t,r),n)},arguments)},imports.wbg.__wbg_removeItem_0e1e70f1687b5304=function(){return handleError(function(e,t,r){e.removeItem(getStringFromWasm0(t,r))},arguments)},imports.wbg.__wbg_request_59e784a631ac3e7d=function(e,t,r,n,a){return e.request(getStringFromWasm0(t,r),n,a)},imports.wbg.__wbg_resolve_caf97c30b83f7053=function(e){return Promise.resolve(e)},imports.wbg.__wbg_result_25e75004b82b9830=function(){return handleError(function(e){return e.result},arguments)},imports.wbg.__wbg_setInterval_6714a9bec1e91fa3=function(){return handleError(function(e,t,r){return e.setInterval(t,r)},arguments)},imports.wbg.__wbg_setItem_64dfb54d7b20d84c=function(){return handleError(function(e,t,r,n,a){e.setItem(getStringFromWasm0(t,r),getStringFromWasm0(n,a))},arguments)},imports.wbg.__wbg_setTimeout_780ac15e3df4c663=function(){return handleError(function(e,t,r){return e.setTimeout(t,r)},arguments)},imports.wbg.__wbg_set_3f1d0b984ed272ed=function(e,t,r){e[t]=r},imports.wbg.__wbg_set_9e6516df7b7d0f19=function(e,t,r){e.set(getArrayU8FromWasm0(t,r))},imports.wbg.__wbg_set_c213c871859d6500=function(e,t,r){e[t>>>0]=r},imports.wbg.__wbg_set_c2abbebe8b9ebee1=function(){return handleError(function(e,t,r){return Reflect.set(e,t,r)},arguments)},imports.wbg.__wbg_set_oncomplete_71dbeb19a31158ae=function(e,t){e.oncomplete=t},imports.wbg.__wbg_set_onerror_2a8ad6135dc1ec74=function(e,t){e.onerror=t},imports.wbg.__wbg_set_onerror_dc82fea584ffccaa=function(e,t){e.onerror=t},imports.wbg.__wbg_set_onmessage_86d8d65dbed3a751=function(e,t){e.onmessage=t},imports.wbg.__wbg_set_onsuccess_f367d002b462109e=function(e,t){e.onsuccess=t},imports.wbg.__wbg_set_onupgradeneeded_0a519a73284a1418=function(e,t){e.onupgradeneeded=t},imports.wbg.__wbg_slice_3e7e2fc0da7cc625=function(e,t,r){return e.slice(t>>>0,r>>>0)},imports.wbg.__wbg_static_accessor_GLOBAL_89e1d9ac6a1b250e=function(){const e=typeof global>"u"?null:global;return isLikeNone(e)?0:addToExternrefTable0(e)},imports.wbg.__wbg_static_accessor_GLOBAL_THIS_8b530f326a9e48ac=function(){const e=typeof globalThis>"u"?null:globalThis;return isLikeNone(e)?0:addToExternrefTable0(e)},imports.wbg.__wbg_static_accessor_SELF_6fdf4b64710cc91b=function(){const e=typeof self>"u"?null:self;return isLikeNone(e)?0:addToExternrefTable0(e)},imports.wbg.__wbg_static_accessor_WINDOW_b45bfc5a37f6cfa2=function(){const e=typeof window>"u"?null:window;return isLikeNone(e)?0:addToExternrefTable0(e)},imports.wbg.__wbg_stringify_b5fb28f6465d9c3e=function(){return handleError(function(e){return JSON.stringify(e)},arguments)},imports.wbg.__wbg_target_1447f5d3a6fa6fe0=function(e){const t=e.target;return isLikeNone(t)?0:addToExternrefTable0(t)},imports.wbg.__wbg_then_4f46f6544e6b4a28=function(e,t){return e.then(t)},imports.wbg.__wbg_then_70d05cf780a18d77=function(e,t,r){return e.then(t,r)},imports.wbg.__wbg_toString_331854e6e3c16849=function(){return handleError(function(e,t){return e.toString(t)},arguments)},imports.wbg.__wbg_transaction_b93f1b2d9bd57727=function(){return handleError(function(e,t,r){return e.transaction(getStringFromWasm0(t,r))},arguments)},imports.wbg.__wbg_transaction_cd940bd89781f616=function(){return handleError(function(e,t,r){return e.transaction(t,__wbindgen_enum_IdbTransactionMode[r])},arguments)},imports.wbg.__wbg_transaction_e90346abb797e13b=function(){return handleError(function(e,t){return e.transaction(t)},arguments)},imports.wbg.__wbg_value_692627309814bb8c=function(e){return e.value},imports.wbg.__wbg_value_bf03593c8a7b58b8=function(){return handleError(function(e){return e.value},arguments)},imports.wbg.__wbg_warn_1d74dddbe2fd1dbb=function(e){console.warn(e)},imports.wbg.__wbindgen_cast_2241b6af4c4b2941=function(e,t){return getStringFromWasm0(e,t)},imports.wbg.__wbindgen_cast_4625c577ab2ec9ee=function(e){return BigInt.asUintN(64,e)},imports.wbg.__wbindgen_cast_5698a9451cda789a=function(e,t){return makeMutClosure(e,t,wasm.wasm_bindgen__closure__destroy__h4d3ac454e1c5b733,wasm_bindgen__convert__closures_____invoke__h5d89cc2ab3b3e449)},imports.wbg.__wbindgen_cast_77e231585ffca6cb=function(e,t){return makeMutClosure(e,t,wasm.wasm_bindgen__closure__destroy__h4d3ac454e1c5b733,wasm_bindgen__convert__closures_____invoke__h461a9f3a02628bdb)},imports.wbg.__wbindgen_cast_97872415fd606c97=function(e,t){return makeMutClosure(e,t,wasm.wasm_bindgen__closure__destroy__hddca379abe978273,wasm_bindgen__convert__closures_____invoke__h3ba5f0fbfb39f2bc)},imports.wbg.__wbindgen_cast_9ae0607507abb057=function(e){return e},imports.wbg.__wbindgen_cast_d19e3192a76932c1=function(e,t){return makeMutClosure(e,t,wasm.wasm_bindgen__closure__destroy__h4d3ac454e1c5b733,wasm_bindgen__convert__closures_____invoke__h183d48ae9af1b9ef)},imports.wbg.__wbindgen_cast_d6cd19b81560fd6e=function(e){return e},imports.wbg.__wbindgen_cast_f70748596beccc9a=function(e,t){return makeMutClosure(e,t,wasm.wasm_bindgen__closure__destroy__h4d3ac454e1c5b733,wasm_bindgen__convert__closures_____invoke__h461a9f3a02628bdb)},imports.wbg.__wbindgen_init_externref_table=function(){const e=wasm.__wbindgen_externrefs,t=e.grow(4);e.set(0,void 0),e.set(t+0,void 0),e.set(t+1,null),e.set(t+2,!0),e.set(t+3,!1)},imports}function __wbg_finalize_init(e,t){return wasm=e.exports,__wbg_init.__wbindgen_wasm_module=t,cachedDataViewMemory0=null,cachedUint8ArrayMemory0=null,wasm.__wbindgen_start(),wasm}async function __wbg_init(e){if(wasm!==void 0)return wasm;typeof e<"u"&&(Object.getPrototypeOf(e)===Object.prototype?{module_or_path:e}=e:console.warn("using deprecated parameters for the initialization function; pass a single object instead")),typeof e>"u"&&(e=new URL("/assets/absurder_sql_bg-Djfv2yZg.wasm",import.meta.url));const t=__wbg_get_imports();(typeof e=="string"||typeof Request=="function"&&e instanceof Request||typeof URL=="function"&&e instanceof URL)&&(e=fetch(e));const{instance:r,module:n}=await __wbg_load(await e,t);return __wbg_finalize_init(r,n)}class MultiTabDatabase{constructor(t,r,n={}){this.Database=t,this.dbName=r,this.db=null,this.refreshCallbacks=[],this.autoSync=n.autoSync!==!1,this.waitForLeadership=n.waitForLeadership||!1,this.syncIntervalMs=n.syncIntervalMs||0,this.syncIntervalId=null}async init(){this.db=await this.Database.newDatabase(this.dbName),this.db.onDataChange(t=>{console.log(`[MultiTabDatabase] Data change received: ${t}`),this._triggerRefreshCallbacks()}),this.beforeUnloadHandler=async()=>{console.log("[MultiTabDatabase] Page unloading, cleaning up leader election");try{await this.db.close()}catch(t){console.error("[MultiTabDatabase] Error during cleanup:",t)}},window.addEventListener("beforeunload",this.beforeUnloadHandler),this.syncIntervalMs>0&&(this.syncIntervalId=setInterval(async()=>{try{await this.db.sync()}catch(t){console.error("[MultiTabDatabase] Auto-sync error:",t)}},this.syncIntervalMs)),console.log(`[MultiTabDatabase] Initialized database: ${this.dbName}`)}async isLeader(){return await this.db.isLeader()}async waitForLeadership(t=5e3){return await this.db.waitForLeadership()}async requestLeadership(){return await this.db.requestLeadership()}async getLeaderInfo(){return await this.db.getLeaderInfo()}async write(t,r=[]){if(!await this.isLeader())if(this.waitForLeadership)console.log("[MultiTabDatabase] Not leader, waiting for leadership..."),await this.waitForLeadership();else throw new Error("Cannot write: This tab is not the leader. Use db.waitForLeadership() or db.requestLeadership() to become leader, or set waitForLeadership: true in options.");let a;return r.length>0?a=await this.db.executeWithParams(t,r):a=await this.db.execute(t),this.autoSync&&await this.db.sync(),console.log("[MultiTabDatabase] Write completed and synced"),a}async query(t,r=[]){return r.length>0?await this.db.executeWithParams(t,r):await this.db.execute(t)}async execute(t,r=[]){return this._isWriteOperation(t)?await this.write(t,r):await this.query(t,r)}async sync(){return await this.db.sync()}onRefresh(t){if(typeof t!="function")throw new Error("Callback must be a function");this.refreshCallbacks.push(t)}offRefresh(t){const r=this.refreshCallbacks.indexOf(t);r>-1&&this.refreshCallbacks.splice(r,1)}async close(){this.syncIntervalId&&(clearInterval(this.syncIntervalId),this.syncIntervalId=null),this.db&&(await this.db.close(),this.db=null),this.refreshCallbacks=[],console.log(`[MultiTabDatabase] Closed database: ${this.dbName}`)}async enableOptimisticUpdates(t){return await this.db.enableOptimisticUpdates(t)}async isOptimisticMode(){return await this.db.isOptimisticMode()}async trackOptimisticWrite(t){return await this.db.trackOptimisticWrite(t)}async getPendingWritesCount(){return await this.db.getPendingWritesCount()}async clearOptimisticWrites(){return await this.db.clearOptimisticWrites()}async enableCoordinationMetrics(t){return await this.db.enableCoordinationMetrics(t)}async isCoordinationMetricsEnabled(){return await this.db.isCoordinationMetricsEnabled()}async recordLeadershipChange(t){return await this.db.recordLeadershipChange(t)}async recordNotificationLatency(t){return await this.db.recordNotificationLatency(t)}async recordWriteConflict(){return await this.db.recordWriteConflict()}async recordFollowerRefresh(){return await this.db.recordFollowerRefresh()}async getCoordinationMetrics(){return await this.db.getCoordinationMetrics()}async resetCoordinationMetrics(){return await this.db.resetCoordinationMetrics()}_isWriteOperation(t){const r=t.trim().toUpperCase();return r.startsWith("INSERT")||r.startsWith("UPDATE")||r.startsWith("DELETE")||r.startsWith("REPLACE")}_triggerRefreshCallbacks(){for(const t of this.refreshCallbacks)try{t()}catch(r){console.error("[MultiTabDatabase] Error in refresh callback:",r)}}}let db,isLeader=!1;const app=document.getElementById("app");function renderUI(){app.innerHTML=`
        <div style="max-width: 800px; margin: 50px auto; font-family: system-ui;">
            <h1>Vite + AbsurderSQL Demo <span id="leaderBadge" style="font-size: 0.5em; padding: 4px 12px; border-radius: 12px; background: #gray; color: white;">...</span></h1>
            <div id="status" style="padding: 10px; background: #e3f2fd; margin: 20px 0; border-radius: 4px;"></div>
            <div style="margin: 20px 0;">
                <button id="runTest" style="padding: 10px 20px; background: #0066cc; color: white; border: none; border-radius: 4px; cursor: pointer; margin-right: 10px;">Run Test</button>
                <button id="clear" style="padding: 10px 20px; background: #dc3545; color: white; border: none; border-radius: 4px; cursor: pointer; margin-right: 10px;">Clear DB</button>
                <button id="requestLeader" style="padding: 10px 20px; background: #28a745; color: white; border: none; border-radius: 4px; cursor: pointer;">Request Leadership</button>
            </div>
            <div style="padding: 10px; background: #fff3cd; border-left: 4px solid #ffc107; margin: 20px 0;">
                <strong>Multi-Tab Test:</strong> Open this page in multiple tabs. Only the leader tab can write data. Try writing from different tabs to see the coordination in action!
            </div>
            <pre id="output" style="margin-top: 20px; padding: 20px; background: #f5f5f5; border-radius: 4px; overflow-x: auto;"></pre>
        </div>
    `}function log(e){const t=document.getElementById("output");t.textContent+=e+`
`}function status(e){document.getElementById("status").textContent=e}async function updateLeaderStatus(){try{isLeader=await db.isLeader();const e=document.getElementById("leaderBadge"),t=document.getElementById("runTest"),r=document.getElementById("clear");isLeader?(e.textContent="[LEADER]",e.style.background="#28a745",t.disabled=!1,r.disabled=!1,status("This tab is the LEADER - you can write to the database")):(e.textContent="[FOLLOWER]",e.style.background="#6c757d",t.disabled=!0,r.disabled=!0,status('This tab is a FOLLOWER - read-only mode (click "Request Leadership" to become leader)'))}catch(e){console.error("Error updating leader status:",e)}}async function initDB(){status("Initializing WASM..."),await __wbg_init(),window.Database=Database,status("Creating multi-tab database..."),db=new MultiTabDatabase(Database,"vite_example",{autoSync:!0,waitForLeadership:!1}),window.db=db,await db.init(),await db.execute("CREATE TABLE IF NOT EXISTS items (id INT PRIMARY KEY, name TEXT, value REAL)"),db.onRefresh(async()=>{var e;log("ðŸ”„ Data changed in another tab - refreshing...");try{await updateLeaderStatus()}catch(t){(e=t.message)!=null&&e.includes("recursive use")||console.error("Error in refresh callback:",t)}}),await updateLeaderStatus(),setInterval(async()=>{var e;try{await updateLeaderStatus()}catch(t){(e=t.message)!=null&&e.includes("recursive use")||console.error("Error updating leader status:",t)}},2e3),status("Ready!")}async function runTest(){document.getElementById("output").textContent="";try{if(!await db.isLeader()){log("âŒ Cannot write: This tab is not the leader"),log(`Click "Request Leadership" to become leader
`),status("âš ï¸ Write failed - not leader");return}log("Inserting test data..."),await db.write("INSERT INTO items VALUES (?, ?, ?)",[{type:"Integer",value:1},{type:"Text",value:"Widget"},{type:"Real",value:19.99}]),await db.write("INSERT INTO items VALUES (?, ?, ?)",[{type:"Integer",value:2},{type:"Text",value:"Gadget"},{type:"Real",value:49.99}]),await db.write("INSERT INTO items VALUES (?, ?, ?)",[{type:"Integer",value:3},{type:"Text",value:"Tool"},{type:"Real",value:29.99}]),log(`âœ“ Inserted 3 items (auto-synced)
`),log("Querying data..."),(await db.query("SELECT * FROM items")).rows.forEach(r=>{const n=r.values[0].value,a=r.values[1].value,s=r.values[2].value;log(`  ${n}: ${a} - $${s}`)}),log(`
âœ“ Test complete! Data persists across page refreshes.`),log("Open another tab to see multi-tab coordination in action!"),status("Test passed!")}catch(e){log("ERROR: "+e.message),status("Test failed: "+e.message)}}async function clearDB(){try{if(!await db.isLeader()){log("âŒ Cannot clear: This tab is not the leader"),status("âš ï¸ Clear failed - not leader");return}await db.write("DROP TABLE IF EXISTS items"),await db.execute("CREATE TABLE items (id INT PRIMARY KEY, name TEXT, value REAL)"),document.getElementById("output").textContent="",log("âœ“ Database cleared"),status("Database cleared")}catch(e){log("ERROR: "+e.message),status("Clear failed: "+e.message)}}async function requestLeadership(){try{log("Requesting leadership..."),await db.requestLeadership(),await new Promise(e=>setTimeout(e,300));try{await updateLeaderStatus(),log(isLeader?"âœ“ Leadership acquired - you can now write!":"âš ï¸ Leadership request sent (UI will update when leader)")}catch{log("Leadership request sent (status will update shortly)")}}catch(e){log("ERROR: "+e.message)}}renderUI();initDB().then(()=>{document.getElementById("runTest").addEventListener("click",runTest),document.getElementById("clear").addEventListener("click",clearDB),document.getElementById("requestLeader").addEventListener("click",requestLeadership)});
