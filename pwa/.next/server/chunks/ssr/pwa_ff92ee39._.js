module.exports=[22367,(a,b,c)=>{"use strict";b.exports=a.r(76686).vendored["react-ssr"].ReactJsxRuntime},31442,(a,b,c)=>{"use strict";b.exports=a.r(76686).vendored["react-ssr"].ReactDOM},2719,a=>{"use strict";var b=a.i(22367),c=a.i(97863);a.i(31442);var d=a.i(72185),e=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((a,e)=>{let f=(0,d.createSlot)(`Primitive.${e}`),g=c.forwardRef((a,c)=>{let{asChild:d,...g}=a;return(0,b.jsx)(d?f:e,{...g,ref:c})});return g.displayName=`Primitive.${e}`,{...a,[e]:g}},{}),f=c.forwardRef((a,c)=>(0,b.jsx)(e.label,{...a,ref:c,onMouseDown:b=>{b.target.closest("button, input, select, textarea")||(a.onMouseDown?.(b),!b.defaultPrevented&&b.detail>1&&b.preventDefault())}}));f.displayName="Label";var g=a.i(12102);function h({className:a,...c}){return(0,b.jsx)(f,{"data-slot":"label",className:(0,g.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",a),...c})}a.s(["Label",()=>h],2719)},28927,a=>{"use strict";var b=a.i(22367),c=a.i(12102);function d({className:a,...d}){return(0,b.jsx)("textarea",{"data-slot":"textarea",className:(0,c.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),...d})}a.s(["Textarea",()=>d])},72441,a=>{"use strict";let b=(0,a.i(97654).default)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);a.s(["AlertCircle",()=>b],72441)},48354,a=>{"use strict";var b=a.i(22367),c=a.i(97863),d=a.i(23105),e=a.i(45061),f=a.i(57372),g=a.i(88762),h=a.i(5193),i=a.i(2719),j=a.i(28927),k=a.i(41313),l=a.i(88572),m=a.i(11341),n=a.i(11519),o=a.i(78384),p=a.i(21117),q=a.i(57642),r=a.i(65619),s=a.i(38158),t=a.i(62049),u=a.i(63080),v=a.i(35375),w=a.i(60138),x=a.i(25755),y=a.i(62436),z=a.i(2909);let A=(0,a.i(97654).default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);var B=a.i(14627),B=B,C=a.i(72441);let D=["#0088FE","#00C49F","#FFBB28","#FF8042","#8884D8","#82CA9D"];function E(){let{db:a}=(0,d.useDatabaseStore)(),l=(0,d.useDatabaseStore)(a=>a.currentDbName),[m,n]=(0,c.useState)(null),[o,p]=(0,c.useState)([]),[q,r]=(0,c.useState)(!1),[s,t]=(0,c.useState)(""),[u,v]=(0,c.useState)(""),[w,x]=(0,c.useState)("bar");(0,c.useEffect)(()=>{},[a]),(0,c.useEffect)(()=>{},[m]),(0,c.useEffect)(()=>{if(!l)return;let a=localStorage.getItem("absurder-sql-dashboard-layouts");if(a)try{let b=JSON.parse(a);b[l]&&p(b[l])}catch(a){console.error("[Dashboard] Failed to load layouts:",a)}},[l]),(0,c.useEffect)(()=>{if(!l||0===o.length)return;let a=localStorage.getItem("absurder-sql-dashboard-layouts"),b={};if(a)try{b=JSON.parse(a)}catch(a){console.error("[Dashboard] Failed to parse stored layouts:",a)}b[l]=o,localStorage.setItem("absurder-sql-dashboard-layouts",JSON.stringify(b))},[o,l]);let y=async()=>{if(!s||!u)return;let a={id:`chart-${Date.now()}`,title:s,query:u,chartType:w};p(b=>[...b,a]),t(""),v(""),x("bar"),r(!1)};return(0,b.jsx)("div",{className:"min-h-screen bg-background p-6",children:(0,b.jsxs)("div",{className:"max-w-7xl mx-auto space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold",children:"Dashboard Builder"}),(0,b.jsx)("p",{className:"text-muted-foreground mt-2",children:"Create and manage multiple charts for your data"})]}),(0,b.jsxs)(g.Dialog,{open:q,onOpenChange:r,children:[(0,b.jsx)(g.DialogTrigger,{asChild:!0,children:(0,b.jsxs)(f.Button,{id:"addChartButton",children:[(0,b.jsx)(A,{className:"w-4 h-4 mr-2"}),"Add Chart"]})}),(0,b.jsxs)(g.DialogContent,{className:"max-w-2xl",children:[(0,b.jsxs)(g.DialogHeader,{children:[(0,b.jsx)(g.DialogTitle,{children:"Add New Chart"}),(0,b.jsx)(g.DialogDescription,{children:"Configure your chart with a SQL query and visualization type"})]}),(0,b.jsxs)("div",{className:"space-y-4 py-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(i.Label,{htmlFor:"chartTitle",children:"Chart Title"}),(0,b.jsx)(h.Input,{id:"chartTitle",placeholder:"Enter chart title",value:s,onChange:a=>t(a.target.value)})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(i.Label,{htmlFor:"chartQuery",children:"SQL Query"}),(0,b.jsx)(j.Textarea,{id:"chartQuery",placeholder:"SELECT column1, column2 FROM table",rows:6,value:u,onChange:a=>v(a.target.value),className:"font-mono text-sm"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(i.Label,{htmlFor:"chartType",children:"Chart Type"}),(0,b.jsxs)(k.Select,{value:w,onValueChange:a=>x(a),children:[(0,b.jsx)(k.SelectTrigger,{id:"chartType",children:(0,b.jsx)(k.SelectValue,{})}),(0,b.jsxs)(k.SelectContent,{children:[(0,b.jsx)(k.SelectItem,{value:"bar",children:"Bar Chart"}),(0,b.jsx)(k.SelectItem,{value:"line",children:"Line Chart"}),(0,b.jsx)(k.SelectItem,{value:"pie",children:"Pie Chart"}),(0,b.jsx)(k.SelectItem,{value:"scatter",children:"Scatter Plot"})]})]})]})]}),(0,b.jsxs)(g.DialogFooter,{children:[(0,b.jsx)(f.Button,{variant:"outline",onClick:()=>r(!1),children:"Cancel"}),(0,b.jsx)(f.Button,{onClick:y,children:"Add"})]})]})]})]}),0===o.length?(0,b.jsx)(e.Card,{children:(0,b.jsxs)(e.CardContent,{className:"flex flex-col items-center justify-center py-16",children:[(0,b.jsx)(C.AlertCircle,{className:"w-12 h-12 text-muted-foreground mb-4"}),(0,b.jsx)("p",{className:"text-lg font-medium mb-2",children:"No charts yet"}),(0,b.jsx)("p",{className:"text-muted-foreground mb-4",children:"Add a chart to get started with your dashboard"}),(0,b.jsxs)(f.Button,{onClick:()=>r(!0),children:[(0,b.jsx)(A,{className:"w-4 h-4 mr-2"}),"Add Your First Chart"]})]})}):(0,b.jsx)("div",{className:"dashboard-grid grid grid-cols-1 md:grid-cols-2 gap-6",children:o.map(c=>(0,b.jsx)(F,{chart:c,db:a,onRemove:()=>{var a;return a=c.id,void p(b=>b.filter(b=>b.id!==a))}},c.id))})]})})}function F({chart:a,db:d,onRemove:g}){let[h,i]=(0,c.useState)([]),[j,k]=(0,c.useState)(null),[A,E]=(0,c.useState)(!0);return(0,c.useEffect)(()=>{!async function(){if(!d)return E(!1);try{E(!0),k(null);let b=await d.execute(a.query),c=b.rows.map(a=>{let c={};return b.columns.forEach((b,d)=>{let e=a.values[d];c[b]=e?.value??e}),c});i(c)}catch(a){console.error("[ChartCard] Query failed:",a),k(a instanceof Error?a.message:"Failed to execute query")}finally{E(!1)}}()},[d,a.query]),(0,b.jsxs)(e.Card,{className:"dashboard-chart","data-testid":"dashboard-chart",children:[(0,b.jsxs)(e.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(e.CardTitle,{children:a.title}),(0,b.jsx)(e.CardDescription,{className:"text-xs font-mono mt-1",children:a.query.length>60?`${a.query.substring(0,60)}...`:a.query})]}),(0,b.jsx)(f.Button,{variant:"ghost",size:"icon",onClick:g,"aria-label":"Remove chart",children:(0,b.jsx)(B.default,{className:"w-4 h-4"})})]}),(0,b.jsx)(e.CardContent,{children:(()=>{if(A)return(0,b.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,b.jsx)("p",{className:"text-muted-foreground",children:"Loading chart..."})});if(j)return(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center h-64 text-destructive",children:[(0,b.jsx)(C.AlertCircle,{className:"w-8 h-8 mb-2"}),(0,b.jsx)("p",{className:"font-medium",children:"Error loading chart"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:j})]});if(0===h.length)return(0,b.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,b.jsx)("p",{className:"text-muted-foreground",children:"No data available"})});let c=Object.keys(h[0]||{}),d=c[0],e=c[1]||c[0];switch(a.chartType){case"bar":return(0,b.jsx)(y.ResponsiveContainer,{width:"100%",height:300,children:(0,b.jsxs)(n.BarChart,{data:h,children:[(0,b.jsx)(v.CartesianGrid,{strokeDasharray:"3 3"}),(0,b.jsx)(t.XAxis,{dataKey:d}),(0,b.jsx)(u.YAxis,{}),(0,b.jsx)(w.Tooltip,{}),(0,b.jsx)(x.Legend,{}),(0,b.jsx)(o.Bar,{dataKey:e,fill:"#8884d8"})]})});case"line":return(0,b.jsx)(y.ResponsiveContainer,{width:"100%",height:300,children:(0,b.jsxs)(l.LineChart,{data:h,children:[(0,b.jsx)(v.CartesianGrid,{strokeDasharray:"3 3"}),(0,b.jsx)(t.XAxis,{dataKey:d}),(0,b.jsx)(u.YAxis,{}),(0,b.jsx)(w.Tooltip,{}),(0,b.jsx)(x.Legend,{}),(0,b.jsx)(m.Line,{type:"monotone",dataKey:e,stroke:"#8884d8"})]})});case"pie":return(0,b.jsx)(y.ResponsiveContainer,{width:"100%",height:300,children:(0,b.jsxs)(p.PieChart,{children:[(0,b.jsx)(q.Pie,{data:h,dataKey:e,nameKey:d,cx:"50%",cy:"50%",outerRadius:100,label:!0,children:h.map((a,c)=>(0,b.jsx)(z.Cell,{fill:D[c%D.length]},`cell-${c}`))}),(0,b.jsx)(w.Tooltip,{}),(0,b.jsx)(x.Legend,{})]})});case"scatter":return(0,b.jsx)(y.ResponsiveContainer,{width:"100%",height:300,children:(0,b.jsxs)(r.ScatterChart,{children:[(0,b.jsx)(v.CartesianGrid,{strokeDasharray:"3 3"}),(0,b.jsx)(t.XAxis,{dataKey:d}),(0,b.jsx)(u.YAxis,{dataKey:e}),(0,b.jsx)(w.Tooltip,{cursor:{strokeDasharray:"3 3"}}),(0,b.jsx)(x.Legend,{}),(0,b.jsx)(s.Scatter,{name:a.title,data:h,fill:"#8884d8"})]})});default:return null}})()})]})}function G(){return(0,d.useDatabaseStore)(a=>a.currentDbName),(0,b.jsx)(E,{})}a.s(["default",()=>G],48354)},85002,a=>{a.v(b=>Promise.all(["server/chunks/ssr/7dc3a_@npiesco_absurder-sql_absurder_sql_bg_wasm_8664c6f1._.js","server/chunks/ssr/7dc3a_@npiesco_absurder-sql_absurder_sql_1f32a207.js"].map(b=>a.l(b))).then(()=>b(69732)))}];

//# sourceMappingURL=pwa_ff92ee39._.js.map