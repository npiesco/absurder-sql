module.exports=[22367,(a,b,c)=>{"use strict";b.exports=a.r(76686).vendored["react-ssr"].ReactJsxRuntime},14400,a=>{a.v("/_next/static/media/absurder_sql_bg.4b006aa8.wasm")},17766,a=>{"use strict";var b=a.i(69732);class c{db=null;dbName=null;initialized=!1;async initialize(){if(!this.initialized)try{await (0,b.default)(),this.initialized=!0}catch(a){throw console.error("Failed to initialize WASM module:",a),Error(`WASM initialization failed: ${a}`)}}isInitialized(){return this.initialized}async open(a){if(await this.initialize(),this.db)throw Error("Database is already open. Close it first.");try{this.db=await b.Database.newDatabase(a),this.dbName=a,console.log(`DatabaseClient: Opened database "${a}"`)}catch(a){throw console.error("DatabaseClient: Failed to open database:",a),Error(`Failed to open database: ${a}`)}}async execute(a,b){if(!this.db)throw Error("Database not opened. Call open() first.");try{if(b&&b.length>0)return await this.db.executeWithParams(a,b);return await this.db.execute(a)}catch(a){throw console.error("Query execution failed:",a),Error(`Query failed: ${a}`)}}async export(){if(!this.db)throw Error("Database not opened. Call open() first.");try{let a=await this.db.exportToFile();return new Blob([a],{type:"application/x-sqlite3"})}catch(a){throw console.error("Database export failed:",a),Error(`Export failed: ${a}`)}}async import(a){if(!this.db||!this.dbName)throw Error("Database not opened. Call open() first to create initial database instance.");try{let c=await a.arrayBuffer();await this.db.importFromFile(new Uint8Array(c)),console.log(`Import complete, reopening database "${this.dbName}"...`),this.db=await b.Database.newDatabase(this.dbName),console.log("Database reopened after import")}catch(a){throw console.error("Database import failed:",a),Error(`Import failed: ${a}`)}}async sync(){if(!this.db)throw Error("Database not opened. Call open() first.");try{await this.db.sync()}catch(a){throw console.error("Database sync failed:",a),Error(`Sync failed: ${a}`)}}async close(){if(this.db)try{await this.db.close(),this.db=null,this.dbName=null}catch(a){throw console.error("Database close failed:",a),Error(`Close failed: ${a}`)}}isOpen(){return null!==this.db}getDatabaseName(){return this.dbName}async exportDatabase(){return this.export()}async importDatabase(a,c){await this.initialize(),this.db&&await this.close();try{this.db=await b.Database.newDatabase(a),this.dbName=a;let d=await c.arrayBuffer();await this.db.importFromFile(new Uint8Array(d)),console.log(`Import complete, reopening database "${a}"...`),this.db=await b.Database.newDatabase(a),console.log("Database reopened after import")}catch(a){throw console.error("Database import failed:",a),this.db=null,this.dbName=null,Error(`Import failed: ${a}`)}}async deleteDatabase(a){await this.initialize(),this.dbName===a&&this.db&&await this.close();try{let b=indexedDB.deleteDatabase(a);await new Promise((c,d)=>{b.onsuccess=()=>{console.log(`Deleted database "${a}"`),c()},b.onerror=()=>{d(Error(`Failed to delete database: ${b.error}`))},b.onblocked=()=>{console.warn(`Delete blocked for database "${a}". Close all connections first.`)}})}catch(b){throw console.error(`Failed to delete database "${a}":`,b),Error(`Delete failed: ${b}`)}}getDatabase(){return this.db}async isLeader(){if(!this.db)throw Error("Database not opened. Call open() first.");return await this.db.isLeader()}async waitForLeadership(){if(!this.db)throw Error("Database not opened. Call open() first.");return await this.db.waitForLeadership()}async requestLeadership(){if(!this.db)throw Error("Database not opened. Call open() first.");return await this.db.requestLeadership()}async allowNonLeaderWrites(a){if(!this.db)throw Error("Database not opened. Call open() first.");return await this.db.allowNonLeaderWrites(a)}}a.s(["DatabaseClient",()=>c])},21609,a=>{"use strict";var b,c=a.i(22367),d=a.i(97863),e=a.i(17766);(b={}).DB_NOT_OPEN="DB_NOT_OPEN",b.QUERY_FAILED="QUERY_FAILED",b.IMPORT_FAILED="IMPORT_FAILED",b.EXPORT_FAILED="EXPORT_FAILED",b.INITIALIZATION_FAILED="INITIALIZATION_FAILED",b.CONNECTION_CLOSED="CONNECTION_CLOSED",b.TRANSACTION_FAILED="TRANSACTION_FAILED";class f extends Error{code;originalError;sql;operation;suggestion;timestamp;constructor(a){super(a.message),this.name="DatabaseError",this.code=a.code,this.originalError=a.originalError,this.sql=a.sql,this.operation=a.operation,this.suggestion=a.suggestion,this.timestamp=a.timestamp,Error.captureStackTrace&&Error.captureStackTrace(this,f)}toJSON(){return{name:this.name,code:this.code,message:this.message,sql:this.sql,operation:this.operation,suggestion:this.suggestion,timestamp:this.timestamp,stack:this.stack}}}class g extends f{constructor(a="Database not opened"){super({code:"DB_NOT_OPEN",message:a,suggestion:"Call open() before executing queries",timestamp:Date.now()}),this.name="DatabaseNotOpenError"}}class h extends f{constructor(a,b){super({code:"QUERY_FAILED",message:`Query execution failed: ${b.message}`,originalError:b,sql:a,suggestion:"Check SQL syntax and parameters",timestamp:Date.now()}),this.name="QueryExecutionError"}}class i extends f{constructor(a,b){super({code:"import"===a?"IMPORT_FAILED":"EXPORT_FAILED",message:`${a.charAt(0).toUpperCase()+a.slice(1)} operation failed: ${b.message}`,originalError:b,operation:a,suggestion:"import"===a?"Ensure file is a valid SQLite database":"Check database state before export",timestamp:Date.now()}),this.name="ImportExportError"}}function j(a){console.error("[DatabaseError]",{code:a.code,message:a.message,sql:a.sql,operation:a.operation,timestamp:new Date(a.timestamp).toISOString(),stack:a.stack}),a.originalError&&console.error("[Original Error]",a.originalError)}function k(){let[a,b]=(0,d.useState)(""),f=async()=>{try{let a=new e.DatabaseClient;await a.execute("SELECT 1")}catch(c){let a=new g;j(a),window.lastError=a,b("DatabaseNotOpenError")}},k=async()=>{try{let a=new e.DatabaseClient;await a.open("error_test.db"),await a.execute("INVALID SQL SYNTAX")}catch(c){let a=new h("INVALID SQL SYNTAX",c);j(a),window.lastError=a,b("QueryExecutionError")}},l=async()=>{try{let a=new e.DatabaseClient;await a.open("error_test.db");let b=new File(["not a database"],"invalid.db",{type:"application/x-sqlite3"});await a.import(b)}catch(c){let a=new i("import",c);j(a),window.lastError=a,b("ImportExportError")}};return(0,c.jsxs)("div",{style:{padding:"20px",fontFamily:"system-ui"},children:[(0,c.jsx)("h1",{children:"Error Handling Test Page"}),(0,c.jsx)("p",{id:"status",children:"Ready"}),(0,c.jsx)("div",{style:{marginTop:"20px"},children:(0,c.jsx)("button",{id:"testNotOpenError",onClick:f,children:"Test DatabaseNotOpenError"})}),(0,c.jsx)("div",{style:{marginTop:"20px"},children:(0,c.jsx)("button",{id:"testQueryError",onClick:k,children:"Test QueryExecutionError"})}),(0,c.jsx)("div",{style:{marginTop:"20px"},children:(0,c.jsx)("button",{id:"testImportError",onClick:l,children:"Test ImportExportError"})}),(0,c.jsx)("p",{id:"errorResult",style:{marginTop:"20px",color:"red"},children:a})]})}a.s(["default",()=>k],21609)}];

//# sourceMappingURL=pwa_023defd8._.js.map