module.exports=[86777,a=>{"use strict";var b=a.i(22367),c=a.i(97863),d=a.i(23105),e=a.i(37811),f=a.i(41313),g=a.i(57372),h=a.i(45061),i=a.i(88762),j=a.i(82995),k=a.i(2719);function l(){let{db:a,setDb:l,showSystemTables:m,setShowSystemTables:n}=(0,d.useDatabaseStore)(),[o,p]=(0,c.useState)(null),q=a||o,[r,s]=(0,c.useState)([]),[t,u]=(0,c.useState)(""),[v,w]=(0,c.useState)([]),[x,y]=(0,c.useState)([]),[z,A]=(0,c.useState)(!0),[B,C]=(0,c.useState)(!1),[D,E]=(0,c.useState)(100),[F,G]=(0,c.useState)(1),[H,I]=(0,c.useState)(0),[J,K]=(0,c.useState)(null),[L,M]=(0,c.useState)(""),[N,O]=(0,c.useState)(null),[P,Q]=(0,c.useState)(new Set),[R,S]=(0,c.useState)(!1),[T,U]=(0,c.useState)(null),[V,W]=(0,c.useState)(null),[X,Y]=(0,c.useState)([]),[Z,$]=(0,c.useState)(!1),[_,aa]=(0,c.useState)({column:"",operator:"equals",value:""}),[ab,ac]=(0,c.useState)([]),[ad,ae]=(0,c.useState)([]),[af,ag]=(0,c.useState)(!1),[ah,ai]=(0,c.useState)({includeHeaders:!0,delimiter:"comma",quoteAllFields:!1,lineEnding:"LF",nullHandling:"empty",selectedColumns:[]}),[aj,ak]=(0,c.useState)(!1),[al,am]=(0,c.useState)({prettyPrint:!0,format:"array",selectedColumns:[]}),[an,ao]=(0,c.useState)(!1),[ap,aq]=(0,c.useState)({dropTableIfExists:!1,includeTransactions:!0,batchSize:100,selectedColumns:[]});(0,c.useEffect)(()=>{},[a]),(0,c.useEffect)(()=>{},[o]),(0,c.useEffect)(()=>{q&&ar()},[q]),(0,c.useEffect)(()=>{q&&ar()},[m]),(0,c.useEffect)(()=>{t&&q&&au()},[q,t,F,D,X,V]);let ar=async()=>{if(q)try{C(!0);let a=await q.execute(m?"SELECT name FROM sqlite_master WHERE type='table' ORDER BY name":"SELECT name FROM sqlite_master WHERE type='table' AND name NOT LIKE 'sqlite_%' ORDER BY name"),b=[];for(let c of a.rows){let a=c.values[0].value,d=(await q.execute(`SELECT COUNT(*) FROM ${a}`)).rows[0].values[0].value;b.push({name:a,rowCount:d})}s(b)}catch(a){console.error("Error loading tables:",a)}finally{C(!1)}},as=()=>{if(0===X.length)return"";let a=X.map(a=>{let{column:b,operator:c,value:d}=a;switch(c){case"equals":default:return`${b} = '${d.replace(/'/g,"''")}'`;case"contains":return`${b} LIKE '%${d.replace(/'/g,"''")}%'`;case"starts_with":return`${b} LIKE '${d.replace(/'/g,"''")}%'`;case"greater_than":return`${b} > ${d}`;case"less_than":return`${b} < ${d}`;case"greater_equal":return`${b} >= ${d}`;case"less_equal":return`${b} <= ${d}`;case"not_equal":return`${b} != '${d.replace(/'/g,"''")}'`;case"is_null":return`${b} IS NULL`;case"is_not_null":return`${b} IS NOT NULL`}});return` WHERE ${a.join(" AND ")}`},at=()=>V?` ORDER BY ${V.column} ${V.direction}`:"",au=async()=>{if(q&&t)try{C(!0);let a=(await q.execute(`PRAGMA table_info(${t})`)).rows.map(a=>({name:a.values[1].value,type:a.values[2].value}));w(a);let b=(await q.execute(`PRAGMA foreign_key_list(${t})`)).rows.map(a=>({id:a.values[0].value,seq:a.values[1].value,table:a.values[2].value,from:a.values[3].value,to:a.values[4].value,on_update:a.values[5].value,on_delete:a.values[6].value,match:a.values[7].value}));ac(b);let c=as(),d=at(),e=`SELECT COUNT(*) FROM ${t}${c}`,f=(await q.execute(e)).rows[0].values[0].value;I(f);let g=(F-1)*D,h=`SELECT rowid as _rowid_, * FROM ${t}${c}${d} LIMIT ${D} OFFSET ${g}`,i=await q.execute(h);y(i.rows)}catch(a){console.error("Error loading table data:",a)}finally{C(!1)}},av=async a=>{let b=a.target.files?.[0];b&&await aw(b)},aw=async a=>{if(J&&q&&t)try{let b=x[J.rowIndex].values[0].value,c=v[J.columnIndex],d=await a.arrayBuffer(),e=new Uint8Array(d),f=`UPDATE ${t} SET ${c.name} = ? WHERE rowid = ?`,g=[{type:"Blob",value:Array.from(e)},{type:"Integer",value:b}];await q.executeWithParams(f,g);let h=[...x];h[J.rowIndex].values[J.columnIndex+1].value=Array.from(e),y(h),K(null),M(""),O(null)}catch(a){console.error("Error saving BLOB:",a)}},ax=async()=>{if(J&&q&&t)try{let a=x[J.rowIndex].values[0].value,b=v[J.columnIndex],c=L;if(az(b.type))if(N){let a=await N.arrayBuffer();c=new Uint8Array(a)}else c=null;else""===L||"null"===L.toLowerCase()?c=null:b.type.includes("INT")?c=parseInt(L):(b.type.includes("REAL")||b.type.includes("FLOAT")||b.type.includes("DOUBLE")||b.type.includes("NUMERIC"))&&(c=parseFloat(L));let d=`UPDATE ${t} SET ${b.name} = ? WHERE rowid = ?`,e=[null===c?{type:"Null",value:null}:c instanceof Uint8Array?{type:"Blob",value:Array.from(c)}:"number"==typeof c&&Number.isInteger(c)?{type:"Integer",value:c}:"number"==typeof c?{type:"Real",value:c}:{type:"Text",value:String(c)},{type:"Integer",value:a}];await q.executeWithParams(d,e);let f=[...x],g=c instanceof Uint8Array?Array.from(c):c;f[J.rowIndex].values[J.columnIndex+1].value=g,y(f),K(null),M(""),O(null)}catch(a){console.error("Error saving edit:",a)}},ay=async a=>{"Enter"!==a.key||a.shiftKey?"Escape"===a.key&&(a.preventDefault(),K(null),M(""),O(null)):(a.preventDefault(),await ax())},az=a=>a.toUpperCase().includes("BLOB"),aA=a=>a<1024?`${a} B`:a<1048576?`${(a/1024).toFixed(2)} KB`:`${(a/1048576).toFixed(2)} MB`,aB=async()=>{if(q&&t)try{C(!0),await q.execute(`INSERT INTO ${t} DEFAULT VALUES`),await au()}catch(a){console.error("Error adding row:",a);try{let a=v.map(a=>a.name).join(", "),b=v.map(()=>"?").join(", "),c=v.map(()=>({type:"Null",value:null}));await q.executeWithParams(`INSERT INTO ${t} (${a}) VALUES (${b})`,c),await au()}catch(a){console.error("Error adding row (fallback):",a)}}finally{C(!1)}},aC=async()=>{if(q&&t&&T)try{if(C(!0),"single"===T.type&&void 0!==T.rowId)await q.executeWithParams(`DELETE FROM ${t} WHERE rowid = ?`,[{type:"Integer",value:T.rowId}]);else if("bulk"===T.type){for(let a of Array.from(P))await q.executeWithParams(`DELETE FROM ${t} WHERE rowid = ?`,[{type:"Integer",value:a}]);Q(new Set)}await au(),S(!1),U(null)}catch(a){console.error("Error deleting row(s):",a)}finally{C(!1)}},aD=()=>{S(!1),U(null)},aE=async()=>{if(!q||!t)return null;let a=as(),b=at(),c=`SELECT * FROM ${t}${a}${b}`,d=await q.execute(c);return{columns:v.map(a=>a.name),rows:d.rows}},aF=async a=>{let b=await aE();if(!b)return;let c=a.selectedColumns.length>0?a.selectedColumns:b.columns;if(0===c.length)return;let d=[],e={comma:",",semicolon:";",tab:"	",pipe:"|"}[a.delimiter],f="CRLF"===a.lineEnding?"\r\n":"\n";if(a.includeHeaders){let b=c.map(b=>a.quoteAllFields?`"${b}"`:b).join(e);d.push(b)}b.rows.forEach(f=>{let g=c.map(c=>{let d=b.columns.indexOf(c);var g=f.values[d];if("Null"===g.type)return"null"===a.nullHandling?"NULL":"";let h=String(g.value);return a.quoteAllFields||h.includes(e)||h.includes('"')||h.includes("\n")?`"${h.replace(/"/g,'""')}"`:h}).join(e);d.push(g)});let g=new Blob([d.join(f)],{type:"text/csv;charset=utf-8;"}),h=document.createElement("a");h.href=URL.createObjectURL(g),h.download=`${t}_filtered.csv`,h.click(),ag(!1)},aG=async a=>{let b,c=await aE();if(!c)return;let d=a.selectedColumns.length>0?a.selectedColumns:c.columns;if(0===d.length)return;"array"===a.format?b=c.rows.map(a=>{let b={};return d.forEach(d=>{let e=c.columns.indexOf(d);if(-1!==e){let c=a.values[e];b[d]="Null"===c.type?null:c.value}}),b}):(b={},c.rows.forEach(a=>{let e,f={},g=a.values[0];e="Null"===g.type?"null":Array.isArray(g.value)?JSON.stringify(g.value):String(g.value),d.forEach(b=>{let d=c.columns.indexOf(b);if(-1!==d){let c=a.values[d];f[b]="Null"===c.type?null:c.value}}),b[e]=f}));let e=new Blob([a.prettyPrint?JSON.stringify(b,null,2):JSON.stringify(b)],{type:"application/json"}),f=document.createElement("a");f.href=URL.createObjectURL(e),f.download=`${t}_filtered.json`,f.click(),ak(!1)},aH=async a=>{let b=await aE();if(!b)return;let c=a.selectedColumns.length>0?a.selectedColumns:b.columns;if(0===c.length)return;let d=[];a.includeTransactions&&(d.push("BEGIN TRANSACTION;"),d.push("")),a.dropTableIfExists&&(d.push(`DROP TABLE IF EXISTS ${t};`),d.push(""));let e=c.map(a=>{let b=v.find(b=>b.name===a),c=b?.type||"TEXT";return`  ${a} ${c}`}).join(",\n");if(d.push(`CREATE TABLE ${t} (`),d.push(e),d.push(");"),d.push(""),b.rows.length>0)for(let e=0;e<b.rows.length;e+=a.batchSize){let f=b.rows.slice(e,e+a.batchSize).map(a=>{let d=c.map(c=>{let d=b.columns.indexOf(c),e=a.values[d];if("Null"===e.type)return"NULL";{if("Integer"===e.type||"Real"===e.type)return String(e.value);let a=String(e.value).replace(/'/g,"''");return`'${a}'`}}).join(", ");return`  (${d})`}).join(",\n");d.push(`INSERT INTO ${t} (${c.join(", ")}) VALUES`),d.push(f+";"),d.push("")}a.includeTransactions&&d.push("COMMIT;");let f=new Blob([d.join("\n")],{type:"application/sql"}),g=document.createElement("a");g.href=URL.createObjectURL(f),g.download=`${t}_filtered.sql`,g.click(),ao(!1)},aI=Math.ceil(H/D);return(0,b.jsxs)("div",{id:"dataBrowser",className:"container mx-auto py-6 space-y-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold",children:"Data Browser"}),(0,b.jsx)("p",{className:"text-muted-foreground mt-2",children:"Browse and view table data with pagination"})]}),(0,b.jsxs)(h.Card,{children:[(0,b.jsxs)(h.CardHeader,{children:[(0,b.jsx)(h.CardTitle,{children:"Table Selection"}),(0,b.jsx)(h.CardDescription,{children:"Choose a table to browse its data"})]}),(0,b.jsxs)(h.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex gap-4 items-center",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("label",{htmlFor:"tableSelect",className:"text-sm font-medium mb-2 block",children:"Select Table"}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsxs)(f.Select,{value:t,onValueChange:a=>{u(a),G(1),W(null),Y([])},children:[(0,b.jsx)(f.SelectTrigger,{id:"tableSelect","data-testid":"table-select",className:"flex-1",children:(0,b.jsx)(f.SelectValue,{placeholder:"Choose a table"})}),(0,b.jsx)(f.SelectContent,{children:r.map(a=>(0,b.jsxs)(f.SelectItem,{value:a.name,children:[a.name," (",a.rowCount," rows)"]},a.name))})]}),(0,b.jsx)(g.Button,{id:"refreshTables",onClick:ar,variant:"outline",disabled:B,children:"Refresh"})]})]}),(0,b.jsxs)("div",{className:"w-32",children:[(0,b.jsx)("label",{htmlFor:"pageSizeSelect",className:"text-sm font-medium mb-2 block",children:"Page Size"}),(0,b.jsxs)(f.Select,{value:D.toString(),onValueChange:a=>{E(parseInt(a)),G(1)},children:[(0,b.jsx)(f.SelectTrigger,{id:"pageSizeSelect",children:(0,b.jsx)(f.SelectValue,{})}),(0,b.jsxs)(f.SelectContent,{children:[(0,b.jsx)(f.SelectItem,{value:"100",children:"100"}),(0,b.jsx)(f.SelectItem,{value:"500",children:"500"}),(0,b.jsx)(f.SelectItem,{value:"1000",children:"1000"})]})]})]})]}),t&&(0,b.jsxs)("div",{className:"flex justify-between items-center text-sm text-muted-foreground",children:[(0,b.jsxs)("div",{id:"rowCount",children:["Total: ",(0,b.jsx)("span",{className:"font-semibold",children:H})," rows"]}),(0,b.jsxs)("div",{children:["Page ",F," of ",aI||1]})]})]})]}),t&&(0,b.jsxs)(h.Card,{children:[(0,b.jsxs)(h.CardHeader,{children:[ad.length>0&&(0,b.jsxs)("nav",{"aria-label":"breadcrumb","data-breadcrumb":!0,className:"mb-4 flex items-center gap-2",children:[(0,b.jsx)(g.Button,{onClick:()=>{if(0===ad.length)return;let a=ad[ad.length-1];ae(ad.slice(0,-1)),u(a.table),G(a.page),Y(a.filters),W(a.sort)},variant:"ghost",size:"sm","data-back-button":!0,"aria-label":"Go back to previous table",children:"← Back"}),(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[ad.map((a,c)=>(0,b.jsxs)("span",{children:[a.table," →"]},c)),(0,b.jsx)("span",{className:"font-semibold text-foreground",children:t})]})]}),(0,b.jsxs)("div",{className:"flex justify-between items-start",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(h.CardTitle,{"data-table-title":!0,children:t}),(0,b.jsxs)(h.CardDescription,{children:["Showing ",(F-1)*D+1," - ",Math.min(F*D,H)," of ",H," rows"]})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsxs)(g.Button,{onClick:()=>$(!Z),variant:"outline","data-filter-toggle":!0,children:["Filters ",X.length>0&&`(${X.length})`]}),(0,b.jsx)(g.Button,{onClick:aB,disabled:B,children:"Add Row"}),P.size>0&&(0,b.jsxs)(g.Button,{onClick:()=>{0!==P.size&&(U({type:"bulk"}),S(!0))},variant:"destructive",disabled:B,children:["Delete Selected (",P.size,")"]}),(0,b.jsx)(g.Button,{id:"exportFilteredCSV",onClick:()=>{aF(ah)},variant:"outline",size:"sm",children:"Export CSV"}),(0,b.jsx)(g.Button,{id:"exportFilteredJSON",onClick:()=>{aG(al)},variant:"outline",size:"sm",children:"Export JSON"}),(0,b.jsx)(g.Button,{id:"exportFilteredSQL",onClick:()=>{aH(ap)},variant:"outline",size:"sm",children:"Export SQL"}),(0,b.jsxs)(i.Dialog,{open:af,onOpenChange:ag,children:[(0,b.jsx)(i.DialogTrigger,{asChild:!0,children:(0,b.jsx)(g.Button,{id:"exportFilteredCSVOptions",variant:"outline",size:"sm",onClick:()=>{v.length>0&&0===ah.selectedColumns.length&&ai({...ah,selectedColumns:v.map(a=>a.name)})},children:"CSV Options"})}),(0,b.jsxs)(i.DialogContent,{className:"sm:max-w-[500px]",children:[(0,b.jsxs)(i.DialogHeader,{children:[(0,b.jsx)(i.DialogTitle,{children:"CSV Export Options"}),(0,b.jsx)(i.DialogDescription,{children:"Configure your CSV export settings"})]}),(0,b.jsx)("div",{className:"grid gap-4 py-4",children:v.length>0&&(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(k.Label,{className:"text-sm font-medium",children:"Select Columns to Export"}),(0,b.jsxs)("div",{className:"flex gap-2 mb-2",children:[(0,b.jsx)(g.Button,{id:"selectAllColumns",type:"button",variant:"outline",size:"sm",onClick:()=>ai({...ah,selectedColumns:v.map(a=>a.name)}),children:"Select All"}),(0,b.jsx)(g.Button,{id:"deselectAllColumns",type:"button",variant:"outline",size:"sm",onClick:()=>ai({...ah,selectedColumns:[]}),children:"Deselect All"})]}),(0,b.jsx)("div",{className:"grid grid-cols-2 gap-2 max-h-48 overflow-y-auto",children:v.map(a=>(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)(j.Checkbox,{id:`column-${a.name}`,checked:ah.selectedColumns.includes(a.name),onCheckedChange:b=>{b?ai({...ah,selectedColumns:[...ah.selectedColumns,a.name]}):ai({...ah,selectedColumns:ah.selectedColumns.filter(b=>b!==a.name)})}}),(0,b.jsx)(k.Label,{htmlFor:`column-${a.name}`,className:"text-sm cursor-pointer",children:a.name})]},a.name))})]})}),(0,b.jsx)(i.DialogFooter,{children:(0,b.jsx)(g.Button,{id:"confirmExport",onClick:()=>aF(ah),children:"Export"})})]})]})]})]})]}),(0,b.jsxs)(h.CardContent,{children:[Z&&(0,b.jsx)("div",{className:"mb-4 p-4 border rounded-md bg-muted/20",children:(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"flex gap-2 items-end",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("label",{className:"text-sm font-medium",children:"Column"}),(0,b.jsxs)(f.Select,{value:_.column,onValueChange:a=>aa({..._,column:a}),children:[(0,b.jsx)(f.SelectTrigger,{id:"filter-column","data-filter-column":!0,children:(0,b.jsx)(f.SelectValue,{placeholder:"Select column"})}),(0,b.jsx)(f.SelectContent,{children:v.map(a=>(0,b.jsx)(f.SelectItem,{value:a.name,children:a.name},a.name))})]})]}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("label",{className:"text-sm font-medium",children:"Operator"}),(0,b.jsxs)(f.Select,{value:_.operator,onValueChange:a=>aa({..._,operator:a}),children:[(0,b.jsx)(f.SelectTrigger,{id:"filter-operator","data-filter-operator":!0,children:(0,b.jsx)(f.SelectValue,{})}),(0,b.jsxs)(f.SelectContent,{children:[(0,b.jsx)(f.SelectItem,{value:"equals",children:"Equals"}),(0,b.jsx)(f.SelectItem,{value:"contains",children:"Contains"}),(0,b.jsx)(f.SelectItem,{value:"starts_with",children:"Starts With"}),(0,b.jsx)(f.SelectItem,{value:"greater_than",children:"Greater Than"}),(0,b.jsx)(f.SelectItem,{value:"less_than",children:"Less Than"}),(0,b.jsx)(f.SelectItem,{value:"greater_equal",children:"Greater or Equal"}),(0,b.jsx)(f.SelectItem,{value:"less_equal",children:"Less or Equal"}),(0,b.jsx)(f.SelectItem,{value:"not_equal",children:"Not Equal"}),(0,b.jsx)(f.SelectItem,{value:"is_null",children:"Is NULL"}),(0,b.jsx)(f.SelectItem,{value:"is_not_null",children:"Is Not NULL"})]})]})]}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("label",{className:"text-sm font-medium",children:"Value"}),(0,b.jsx)("input",{id:"filter-value","data-filter-value":!0,type:"text",className:"w-full px-3 py-2 border rounded-md",value:_.value,onChange:a=>aa({..._,value:a.target.value})})]}),(0,b.jsx)(g.Button,{onClick:()=>{_.column&&_.operator&&(Y([...X,_]),aa({column:"",operator:"equals",value:""}),G(1))},className:"mt-auto",children:"Add Filter"})]}),X.length>0&&(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsx)("label",{className:"text-sm font-medium",children:"Active Filters:"}),(0,b.jsx)(g.Button,{onClick:()=>{Y([]),G(1)},variant:"ghost",size:"sm","data-clear-filters":!0,children:"Clear All"})]}),(0,b.jsx)("div",{className:"flex flex-wrap gap-2",children:X.map((a,c)=>(0,b.jsxs)("div",{className:"flex items-center gap-2 px-3 py-1 bg-primary/10 rounded-full text-sm",children:[(0,b.jsxs)("span",{children:[a.column," ",a.operator.replace(/_/g," ")," ",a.value||""]}),(0,b.jsx)("button",{onClick:()=>{Y(X.filter((a,b)=>b!==c)),G(1)},className:"text-destructive hover:text-destructive/80",children:"×"})]},c))})]})]})}),B?(0,b.jsx)("div",{className:"text-center py-8",children:(0,b.jsx)("p",{children:z?"Initializing...":"Loading..."})}):0===x.length?(0,b.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:(0,b.jsx)("p",{children:"No data in this table"})}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"border rounded-md overflow-auto max-h-[600px]",children:(0,b.jsxs)(e.Table,{children:[(0,b.jsx)(e.TableHeader,{children:(0,b.jsxs)(e.TableRow,{children:[(0,b.jsx)(e.TableHead,{className:"w-[50px]",children:(0,b.jsx)("input",{type:"checkbox",checked:P.size===x.length&&x.length>0,onChange:()=>{P.size===x.length?Q(new Set):Q(new Set(x.map(a=>a.values[0].value)))},className:"cursor-pointer"})}),(0,b.jsx)(e.TableHead,{className:"w-[100px]",children:"rowid"}),v.map(a=>{let c,d=(c=a.name,ab.find(a=>a.from===c));return(0,b.jsx)(e.TableHead,{onClick:()=>{var b;return b=a.name,void(V?.column===b?W({column:b,direction:"ASC"===V.direction?"DESC":"ASC"}):W({column:b,direction:"ASC"}),G(1))},className:"cursor-pointer hover:bg-muted/50",children:(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[a.name,d&&(0,b.jsxs)("span",{className:"text-xs text-blue-500","data-fk-indicator":!0,title:`Foreign key to ${d.table}.${d.to}`,children:["→ ",d.table]}),V?.column===a.name&&(0,b.jsx)("span",{className:"text-xs",children:"ASC"===V.direction?"↑":"↓"}),(0,b.jsxs)("span",{className:"text-xs text-muted-foreground ml-2",children:["(",a.type,")"]})]})},a.name)}),(0,b.jsx)(e.TableHead,{className:"w-[100px]",children:"Actions"})]})}),(0,b.jsx)(e.TableBody,{children:x.map((a,c)=>{let d=a.values[0].value;return(0,b.jsxs)(e.TableRow,{children:[(0,b.jsx)(e.TableCell,{children:(0,b.jsx)("input",{type:"checkbox",checked:P.has(d),onChange:()=>{let a;(a=new Set(P)).has(d)?a.delete(d):a.add(d),Q(a)},className:"cursor-pointer"})}),(0,b.jsx)(e.TableCell,{className:"font-mono text-sm",children:d}),a.values.slice(1).map((a,f)=>{let g,h,i,j=J?.rowIndex===c&&J?.columnIndex===f,k=v[f],l=(g=k.name,ab.some(a=>a.from===g)),m=a.value,n=az(k.type)&&Array.isArray(m),o=n?new Uint8Array(m).length:0;return(0,b.jsx)(e.TableCell,{className:`
                                  ${null===a.value||void 0===a.value?"null-value":""}
                                  ${j?"editing":"cursor-pointer hover:bg-muted/50"}
                                `,onDoubleClick:()=>{var b;return!j&&void(K({rowIndex:c,columnIndex:f,value:b=a.value}),M(null!=b?String(b):""),O(null))},"data-fk-link":l&&null!=m?"true":void 0,"data-blob-preview":n?"true":void 0,"data-blob-size":n?aA(o):void 0,children:j?az(k.type)?(0,b.jsx)("input",{type:"file",onChange:av,className:"w-full px-2 py-1 border rounded focus:outline-none focus:ring-2 focus:ring-primary"}):(0,b.jsx)("input",{type:(h=k.type.toUpperCase()).includes("INT")||h.includes("REAL")||h.includes("FLOAT")||h.includes("DOUBLE")||h.includes("NUMERIC")?"number":h.includes("BLOB")?"file":"text",step:k.type.includes("REAL")||k.type.includes("FLOAT")||k.type.includes("DOUBLE")?"any":void 0,value:L,onChange:a=>M(a.target.value),onKeyDown:ay,autoFocus:!0,className:"w-full px-2 py-1 border rounded focus:outline-none focus:ring-2 focus:ring-primary"}):null===a.value||void 0===a.value?(0,b.jsx)("span",{className:"italic text-muted-foreground",children:"NULL"}):az(k.type)&&Array.isArray(m)?(i=new Uint8Array(m),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[!(i.length<4)&&(137===i[0]&&80===i[1]&&78===i[2]&&71===i[3]||255===i[0]&&216===i[1]&&255===i[2]||71===i[0]&&73===i[1]&&70===i[2]||82===i[0]&&73===i[1]&&70===i[2]&&70===i[3]&&i.length>12&&87===i[8]&&69===i[9]&&66===i[10]&&80===i[11])?(0,b.jsx)("img",{src:((a,b="image/png")=>{let c=new Blob([a],{type:b});return URL.createObjectURL(c)})(i),alt:"BLOB preview",className:"max-w-[100px] max-h-[50px] object-contain"}):null,(0,b.jsx)("span",{className:"text-sm text-muted-foreground",children:aA(i.length)}),(0,b.jsx)("button",{onClick:a=>{a.stopPropagation(),((a,b="download.bin")=>{let c=new Blob([a]),d=URL.createObjectURL(c),e=document.createElement("a");e.href=d,e.download=b,document.body.appendChild(e),e.click(),document.body.removeChild(e),URL.revokeObjectURL(d)})(i,`blob-${d}-${k.name}.bin`)},className:"text-xs px-2 py-1 bg-primary text-primary-foreground rounded hover:bg-primary/90","data-blob-download":!0,children:"↓"})]})):l?(0,b.jsx)("button",{onClick:a=>{var b;let c;a.stopPropagation(),b=k.name,(c=ab.find(a=>a.from===b))&&null!=m&&(ae([...ad,{table:t,page:F,filters:X,sort:V}]),u(c.table),Y([{column:c.to,operator:"equals",value:String(m)}]),G(1),W(null))},className:"text-blue-500 hover:text-blue-700 underline",children:String(m)}):String(m)},f)}),(0,b.jsx)(e.TableCell,{children:(0,b.jsx)(g.Button,{onClick:()=>{U({type:"single",rowId:d}),S(!0)},variant:"ghost",size:"sm",disabled:B,"aria-label":"Delete row",children:"Delete"})})]},c)})})]})}),(0,b.jsxs)("div",{className:"flex justify-between items-center mt-4",children:[(0,b.jsx)(g.Button,{onClick:()=>{F>1&&G(F-1)},disabled:1===F,variant:"outline",children:"Previous"}),(0,b.jsxs)("span",{className:"text-sm text-muted-foreground",children:["Page ",F," of ",aI]}),(0,b.jsx)(g.Button,{onClick:()=>{F<Math.ceil(H/D)&&G(F+1)},disabled:F>=aI,variant:"outline",children:"Next"})]})]})]})]}),R&&(0,b.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:aD,children:(0,b.jsxs)("div",{role:"alertdialog",className:"bg-background border rounded-lg p-6 max-w-md mx-4 shadow-lg",onClick:a=>a.stopPropagation(),children:[(0,b.jsx)("h2",{className:"text-lg font-semibold mb-2",children:"Confirm Delete"}),(0,b.jsx)("p",{className:"text-muted-foreground mb-4",children:T?.type==="bulk"?`Are you sure you want to delete ${P.size} row(s)? This action cannot be undone.`:"Are you sure you want to delete this row? This action cannot be undone."}),(0,b.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,b.jsx)(g.Button,{onClick:aD,variant:"outline",type:"button",id:"cancelDeleteButton",children:"Cancel"}),(0,b.jsx)(g.Button,{onClick:aC,variant:"destructive",type:"button",id:"confirmDeleteButton",children:"Delete"})]})]})})]})}a.s(["default",()=>l])}];

//# sourceMappingURL=pwa_app_db_browse_page_tsx_fad1d2ea._.js.map