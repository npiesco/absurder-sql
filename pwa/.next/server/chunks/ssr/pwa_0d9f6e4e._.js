module.exports=[22367,(a,b,c)=>{"use strict";b.exports=a.r(76686).vendored["react-ssr"].ReactJsxRuntime},14400,a=>{a.v("/_next/static/media/absurder_sql_bg.4b006aa8.wasm")},17766,a=>{"use strict";var b=a.i(69732);class c{db=null;dbName=null;initialized=!1;async initialize(){if(!this.initialized)try{await (0,b.default)(),this.initialized=!0}catch(a){throw console.error("Failed to initialize WASM module:",a),Error(`WASM initialization failed: ${a}`)}}isInitialized(){return this.initialized}async open(a){if(await this.initialize(),this.db)throw Error("Database is already open. Close it first.");try{this.db=await b.Database.newDatabase(a),this.dbName=a,console.log(`DatabaseClient: Opened database "${a}"`)}catch(a){throw console.error("DatabaseClient: Failed to open database:",a),Error(`Failed to open database: ${a}`)}}async execute(a,b){if(!this.db)throw Error("Database not opened. Call open() first.");try{if(b&&b.length>0)return await this.db.executeWithParams(a,b);return await this.db.execute(a)}catch(a){throw console.error("Query execution failed:",a),Error(`Query failed: ${a}`)}}async export(){if(!this.db)throw Error("Database not opened. Call open() first.");try{let a=await this.db.exportToFile();return new Blob([a],{type:"application/x-sqlite3"})}catch(a){throw console.error("Database export failed:",a),Error(`Export failed: ${a}`)}}async import(a){if(!this.db||!this.dbName)throw Error("Database not opened. Call open() first to create initial database instance.");try{let c=await a.arrayBuffer();await this.db.importFromFile(new Uint8Array(c)),console.log(`Import complete, reopening database "${this.dbName}"...`),this.db=await b.Database.newDatabase(this.dbName),console.log("Database reopened after import")}catch(a){throw console.error("Database import failed:",a),Error(`Import failed: ${a}`)}}async sync(){if(!this.db)throw Error("Database not opened. Call open() first.");try{await this.db.sync()}catch(a){throw console.error("Database sync failed:",a),Error(`Sync failed: ${a}`)}}async close(){if(this.db)try{await this.db.close(),this.db=null,this.dbName=null}catch(a){throw console.error("Database close failed:",a),Error(`Close failed: ${a}`)}}isOpen(){return null!==this.db}getDatabaseName(){return this.dbName}async exportDatabase(){return this.export()}async importDatabase(a,c){await this.initialize(),this.db&&await this.close();try{this.db=await b.Database.newDatabase(a),this.dbName=a;let d=await c.arrayBuffer();await this.db.importFromFile(new Uint8Array(d)),console.log(`Import complete, reopening database "${a}"...`),this.db=await b.Database.newDatabase(a),console.log("Database reopened after import")}catch(a){throw console.error("Database import failed:",a),this.db=null,this.dbName=null,Error(`Import failed: ${a}`)}}async deleteDatabase(a){await this.initialize(),this.dbName===a&&this.db&&await this.close();try{let b=indexedDB.deleteDatabase(a);await new Promise((c,d)=>{b.onsuccess=()=>{console.log(`Deleted database "${a}"`),c()},b.onerror=()=>{d(Error(`Failed to delete database: ${b.error}`))},b.onblocked=()=>{console.warn(`Delete blocked for database "${a}". Close all connections first.`)}})}catch(b){throw console.error(`Failed to delete database "${a}":`,b),Error(`Delete failed: ${b}`)}}getDatabase(){return this.db}async isLeader(){if(!this.db)throw Error("Database not opened. Call open() first.");return await this.db.isLeader()}async waitForLeadership(){if(!this.db)throw Error("Database not opened. Call open() first.");return await this.db.waitForLeadership()}async requestLeadership(){if(!this.db)throw Error("Database not opened. Call open() first.");return await this.db.requestLeadership()}async allowNonLeaderWrites(a){if(!this.db)throw Error("Database not opened. Call open() first.");return await this.db.allowNonLeaderWrites(a)}}a.s(["DatabaseClient",()=>c])},42075,a=>{"use strict";var b=a.i(22367),c=a.i(97863),d=a.i(17766);function e(){let[a,e]=(0,c.useState)("Initializing..."),[f,g]=(0,c.useState)(null);(0,c.useEffect)(()=>{!async function(){try{let a=new d.DatabaseClient;await a.initialize(),await a.open("test_pwa.db"),window.dbClient=a,g(a),e("Database ready")}catch(a){e(`Error: ${a}`)}}()},[]);let h=async()=>{if(f)try{e("Running test..."),await f.execute("CREATE TABLE IF NOT EXISTS test (id INTEGER PRIMARY KEY, name TEXT)"),await f.execute("INSERT INTO test (id, name) VALUES (?, ?)",[{type:"Integer",value:1},{type:"Text",value:"PWA Test"}]);let a=await f.execute("SELECT * FROM test");e(`Test passed! Rows: ${a.rows.length}`)}catch(a){e(`Test failed: ${a}`)}};return(0,b.jsxs)("div",{style:{padding:"20px",fontFamily:"system-ui"},children:[(0,b.jsx)("h1",{children:"PWA Database Test"}),(0,b.jsx)("p",{id:"status",children:a}),(0,b.jsx)("button",{id:"runTest",onClick:h,disabled:!f,children:"Run Test"})]})}a.s(["default",()=>e])}];

//# sourceMappingURL=pwa_0d9f6e4e._.js.map