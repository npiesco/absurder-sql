module.exports=[22367,(a,b,c)=>{"use strict";b.exports=a.r(76686).vendored["react-ssr"].ReactJsxRuntime},31442,(a,b,c)=>{"use strict";b.exports=a.r(76686).vendored["react-ssr"].ReactDOM},37811,a=>{"use strict";var b=a.i(22367),c=a.i(12102);function d({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,b.jsx)("table",{"data-slot":"table",className:(0,c.cn)("w-full caption-bottom text-sm",a),...d})})}function e({className:a,...d}){return(0,b.jsx)("thead",{"data-slot":"table-header",className:(0,c.cn)("[&_tr]:border-b",a),...d})}function f({className:a,...d}){return(0,b.jsx)("tbody",{"data-slot":"table-body",className:(0,c.cn)("[&_tr:last-child]:border-0",a),...d})}function g({className:a,...d}){return(0,b.jsx)("tr",{"data-slot":"table-row",className:(0,c.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",a),...d})}function h({className:a,...d}){return(0,b.jsx)("th",{"data-slot":"table-head",className:(0,c.cn)("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",a),...d})}function i({className:a,...d}){return(0,b.jsx)("td",{"data-slot":"table-cell",className:(0,c.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",a),...d})}a.s(["Table",()=>d,"TableBody",()=>f,"TableCell",()=>i,"TableHead",()=>h,"TableHeader",()=>e,"TableRow",()=>g])},28927,a=>{"use strict";var b=a.i(22367),c=a.i(12102);function d({className:a,...d}){return(0,b.jsx)("textarea",{"data-slot":"textarea",className:(0,c.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),...d})}a.s(["Textarea",()=>d])},50565,a=>{"use strict";var b=a.i(22367),c=a.i(97863),d=a.i(23105),e=a.i(57372),f=a.i(5193),g=a.i(28927),h=a.i(45061),i=a.i(88762),j=a.i(37811);function k(){let{db:a}=(0,d.useDatabaseStore)(),[k,l]=(0,c.useState)(null),m=a||k,[n,o]=(0,c.useState)([]),[p,q]=(0,c.useState)(null),[r,s]=(0,c.useState)([]),[t,u]=(0,c.useState)([]),[v,w]=(0,c.useState)(null),[x,y]=(0,c.useState)(""),[z,A]=(0,c.useState)(""),[B,C]=(0,c.useState)(!1),[D,E]=(0,c.useState)(""),[F,G]=(0,c.useState)(""),[H,I]=(0,c.useState)(!1),[J,K]=(0,c.useState)(""),[L,M]=(0,c.useState)("");(0,c.useEffect)(()=>{},[a]),(0,c.useEffect)(()=>{},[k]);let N=a=>"Null"===a.type?null:a.value,O=async()=>{if(m)try{let a=await m.execute("SELECT name FROM sqlite_master WHERE type='table' AND name NOT LIKE 'sqlite_%' ORDER BY name"),b=await Promise.all(a.rows.map(async a=>{let b=N(a.values[0])||"";try{let a=await m.execute(`SELECT COUNT(*) as count FROM ${b}`),c=N(a.rows[0].values[0])||0;return{name:b,rowCount:c}}catch{return{name:b,rowCount:0}}}));o(b),y("Tables refreshed"),A("")}catch(a){A(`Error loading tables: ${a.message}`)}},P=async a=>{if(m){q(a);try{let b=(await m.execute(`PRAGMA table_info(${a})`)).rows.map(a=>({cid:N(a.values[0]),name:N(a.values[1]),type:N(a.values[2]),notnull:N(a.values[3]),dflt_value:N(a.values[4]),pk:N(a.values[5])}));s(b);let c=(await m.execute(`PRAGMA index_list(${a})`)).rows.map(a=>({name:N(a.values[1]),unique:N(a.values[2]),origin:N(a.values[3]),partial:N(a.values[4])}));u(c);let d=await m.execute(`SELECT * FROM ${a} LIMIT 5`);w(d),A("")}catch(a){A(`Error loading table details: ${a.message}`)}}},Q=async()=>{if(!m||!D.trim()||!F.trim())return void console.log("Create table validation failed:",{db:!!a,tableName:D,columnDefs:F});try{let a=`CREATE TABLE ${D} (${F})`;console.log("Executing create table:",a),await m.execute(a),console.log("Table created successfully"),y(`Table created: ${D}`),C(!1),E(""),G(""),A(""),await O()}catch(a){console.error("Create table error:",a),A(`Error creating table: ${a.message}`)}},R=async()=>{if(m&&p&&J.trim()&&L.trim())try{let a=`CREATE INDEX ${J} ON ${p}(${L})`;await m.execute(a),y(`Index created: ${J}`),I(!1),K(""),M(""),A(""),await P(p)}catch(a){A(`Error creating index: ${a.message}`)}};return(0,b.jsxs)("div",{id:"schemaViewer",className:"container mx-auto p-6 max-w-6xl",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold mb-6",children:"Schema Viewer"}),!m&&(0,b.jsx)("p",{children:"No database selected. Please create or open a database first."}),(0,b.jsx)("div",{className:"mb-4",children:(0,b.jsx)("p",{id:"status",className:"text-sm text-gray-600",children:x||"Ready"})}),z&&(0,b.jsx)("div",{id:"errorDisplay",className:"mb-4 p-3 bg-red-50 text-red-600 rounded",children:z}),(0,b.jsx)("input",{id:"sqlEditor",type:"hidden"}),(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,b.jsxs)(h.Card,{children:[(0,b.jsxs)(h.CardHeader,{children:[(0,b.jsx)(h.CardTitle,{children:"Tables"}),(0,b.jsx)(h.CardDescription,{children:"Database tables"})]}),(0,b.jsxs)(h.CardContent,{children:[(0,b.jsxs)("div",{className:"space-y-2 mb-4",children:[(0,b.jsx)(e.Button,{id:"refreshButton",onClick:O,disabled:!m,size:"sm",children:"Refresh Tables"}),(0,b.jsxs)(i.Dialog,{open:B,onOpenChange:C,children:[(0,b.jsx)(i.DialogTrigger,{asChild:!0,children:(0,b.jsx)(e.Button,{id:"createTableButton",disabled:!m,size:"sm",variant:"outline",className:"ml-2",children:"Create Table"})}),(0,b.jsxs)(i.DialogContent,{id:"createTableDialog",children:[(0,b.jsxs)(i.DialogHeader,{children:[(0,b.jsx)(i.DialogTitle,{children:"Create New Table"}),(0,b.jsx)(i.DialogDescription,{children:"Enter table name and column definitions"})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)(f.Input,{id:"tableNameInput",placeholder:"table_name",value:D,onChange:a=>E(a.target.value)}),(0,b.jsx)(g.Textarea,{id:"columnDefinitions",placeholder:"id INTEGER PRIMARY KEY, name TEXT",value:F,onChange:a=>G(a.target.value),className:"font-mono"})]}),(0,b.jsx)(i.DialogFooter,{children:(0,b.jsx)(e.Button,{id:"confirmCreateTable",onClick:Q,children:"Create"})})]})]})]}),(0,b.jsx)("div",{id:"tablesList",className:"space-y-1",children:0===n.length?(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"No tables found"}):n.map(a=>(0,b.jsx)("div",{className:`table-item p-2 rounded cursor-pointer hover:bg-gray-100 ${p===a.name?"bg-blue-50":""}`,onClick:()=>P(a.name),children:(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsx)("span",{children:a.name}),(0,b.jsx)("span",{className:"row-count text-xs text-gray-500",children:void 0!==a.rowCount?`${a.rowCount} rows`:""})]})},a.name))})]})]}),(0,b.jsxs)(h.Card,{children:[(0,b.jsxs)(h.CardHeader,{children:[(0,b.jsx)(h.CardTitle,{children:"Table Details"}),(0,b.jsx)(h.CardDescription,{children:p?`Details for ${p}`:"Select a table to view details"})]}),(0,b.jsx)(h.CardContent,{children:p?(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{id:"tableDetails",children:[(0,b.jsx)("h3",{className:"font-semibold mb-2",children:"Columns"}),(0,b.jsxs)(j.Table,{children:[(0,b.jsx)(j.TableHeader,{children:(0,b.jsxs)(j.TableRow,{children:[(0,b.jsx)(j.TableHead,{children:"Name"}),(0,b.jsx)(j.TableHead,{children:"Type"}),(0,b.jsx)(j.TableHead,{children:"Constraints"})]})}),(0,b.jsx)(j.TableBody,{children:r.map(a=>(0,b.jsxs)(j.TableRow,{className:"column-row",children:[(0,b.jsx)(j.TableCell,{className:"font-mono",children:a.name}),(0,b.jsx)(j.TableCell,{children:a.type}),(0,b.jsxs)(j.TableCell,{children:[a.pk?"PRIMARY KEY ":"",a.notnull?"NOT NULL ":"",null!==a.dflt_value?`DEFAULT ${a.dflt_value}`:""]})]},a.cid))})]})]}),(0,b.jsxs)("div",{id:"indexesList",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,b.jsx)("h3",{className:"font-semibold",children:"Indexes"}),(0,b.jsxs)(i.Dialog,{open:H,onOpenChange:I,children:[(0,b.jsx)(i.DialogTrigger,{asChild:!0,children:(0,b.jsx)(e.Button,{id:"createIndexButton",size:"sm",variant:"outline",children:"Create Index"})}),(0,b.jsxs)(i.DialogContent,{id:"createIndexDialog",children:[(0,b.jsxs)(i.DialogHeader,{children:[(0,b.jsx)(i.DialogTitle,{children:"Create New Index"}),(0,b.jsxs)(i.DialogDescription,{children:["Create an index on ",p]})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)(f.Input,{id:"indexNameInput",placeholder:"idx_column_name",value:J,onChange:a=>K(a.target.value)}),(0,b.jsx)(f.Input,{id:"indexColumns",placeholder:"column1, column2",value:L,onChange:a=>M(a.target.value)})]}),(0,b.jsx)(i.DialogFooter,{children:(0,b.jsx)(e.Button,{id:"confirmCreateIndex",onClick:R,children:"Create"})})]})]})]}),0===t.length?(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"No indexes"}):(0,b.jsx)("div",{className:"space-y-1",children:t.map(a=>(0,b.jsxs)("div",{className:"p-2 border rounded text-sm",children:[(0,b.jsx)("span",{className:"font-mono",children:a.name}),1===a.unique&&(0,b.jsx)("span",{className:"ml-2 text-xs text-blue-600",children:"UNIQUE"})]},a.name))})]}),(0,b.jsx)("div",{className:"pt-4 border-t",children:(0,b.jsx)(e.Button,{id:"quickSelectAll",onClick:()=>{p&&(window.location.href=`/db/query?sql=${encodeURIComponent(`SELECT * FROM ${p}`)}`)},variant:"outline",size:"sm",children:"Quick Query: SELECT *"})}),(0,b.jsxs)("div",{id:"dataPreview",className:"pt-4 border-t",children:[(0,b.jsx)("h3",{className:"font-semibold mb-2",children:"Data Preview (First 5 Rows)"}),v&&v.rows.length>0?(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)(j.Table,{children:[(0,b.jsx)(j.TableHeader,{children:(0,b.jsx)(j.TableRow,{children:v.columns.map((a,c)=>(0,b.jsx)(j.TableHead,{children:a},c))})}),(0,b.jsx)(j.TableBody,{children:v.rows.map((a,c)=>(0,b.jsx)(j.TableRow,{children:a.values.map((a,c)=>(0,b.jsx)(j.TableCell,{children:"Null"===a.type?(0,b.jsx)("span",{className:"text-gray-400 italic",children:"NULL"}):String(a.value)},c))},c))})]})}):(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"No data in table"})]})]}):(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"No table selected"})})]})]})]})}function l(){let{currentDbName:a}=(0,d.useDatabaseStore)();return(0,b.jsx)(k,{})}a.s(["default",()=>l])},85002,a=>{a.v(b=>Promise.all(["server/chunks/ssr/7dc3a_@npiesco_absurder-sql_absurder_sql_bg_wasm_8664c6f1._.js","server/chunks/ssr/7dc3a_@npiesco_absurder-sql_absurder_sql_1f32a207.js"].map(b=>a.l(b))).then(()=>b(69732)))}];

//# sourceMappingURL=pwa_b296fe86._.js.map