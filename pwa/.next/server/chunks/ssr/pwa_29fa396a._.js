module.exports=[22367,(a,b,c)=>{"use strict";b.exports=a.r(76686).vendored["react-ssr"].ReactJsxRuntime},31442,(a,b,c)=>{"use strict";b.exports=a.r(76686).vendored["react-ssr"].ReactDOM},14400,a=>{a.v("/_next/static/media/absurder_sql_bg.4b006aa8.wasm")},17766,a=>{"use strict";var b=a.i(69732);class c{db=null;dbName=null;initialized=!1;async initialize(){if(!this.initialized)try{await (0,b.default)(),this.initialized=!0}catch(a){throw console.error("Failed to initialize WASM module:",a),Error(`WASM initialization failed: ${a}`)}}isInitialized(){return this.initialized}async open(a){if(await this.initialize(),this.db)throw Error("Database is already open. Close it first.");try{this.db=await b.Database.newDatabase(a),this.dbName=a,console.log(`DatabaseClient: Opened database "${a}"`)}catch(a){throw console.error("DatabaseClient: Failed to open database:",a),Error(`Failed to open database: ${a}`)}}async execute(a,b){if(!this.db)throw Error("Database not opened. Call open() first.");try{if(b&&b.length>0)return await this.db.executeWithParams(a,b);return await this.db.execute(a)}catch(a){throw console.error("Query execution failed:",a),Error(`Query failed: ${a}`)}}async export(){if(!this.db)throw Error("Database not opened. Call open() first.");try{let a=await this.db.exportToFile();return new Blob([a],{type:"application/x-sqlite3"})}catch(a){throw console.error("Database export failed:",a),Error(`Export failed: ${a}`)}}async import(a){if(!this.db||!this.dbName)throw Error("Database not opened. Call open() first to create initial database instance.");try{let c=await a.arrayBuffer();await this.db.importFromFile(new Uint8Array(c)),console.log(`Import complete, reopening database "${this.dbName}"...`),this.db=await b.Database.newDatabase(this.dbName),console.log("Database reopened after import")}catch(a){throw console.error("Database import failed:",a),Error(`Import failed: ${a}`)}}async sync(){if(!this.db)throw Error("Database not opened. Call open() first.");try{await this.db.sync()}catch(a){throw console.error("Database sync failed:",a),Error(`Sync failed: ${a}`)}}async close(){if(this.db)try{await this.db.close(),this.db=null,this.dbName=null}catch(a){throw console.error("Database close failed:",a),Error(`Close failed: ${a}`)}}isOpen(){return null!==this.db}getDatabaseName(){return this.dbName}async exportDatabase(){return this.export()}async importDatabase(a,c){await this.initialize(),this.db&&await this.close();try{this.db=await b.Database.newDatabase(a),this.dbName=a;let d=await c.arrayBuffer();await this.db.importFromFile(new Uint8Array(d)),console.log(`Import complete, reopening database "${a}"...`),this.db=await b.Database.newDatabase(a),console.log("Database reopened after import")}catch(a){throw console.error("Database import failed:",a),this.db=null,this.dbName=null,Error(`Import failed: ${a}`)}}async deleteDatabase(a){await this.initialize(),this.dbName===a&&this.db&&await this.close();try{let b=indexedDB.deleteDatabase(a);await new Promise((c,d)=>{b.onsuccess=()=>{console.log(`Deleted database "${a}"`),c()},b.onerror=()=>{d(Error(`Failed to delete database: ${b.error}`))},b.onblocked=()=>{console.warn(`Delete blocked for database "${a}". Close all connections first.`)}})}catch(b){throw console.error(`Failed to delete database "${a}":`,b),Error(`Delete failed: ${b}`)}}getDatabase(){return this.db}async isLeader(){if(!this.db)throw Error("Database not opened. Call open() first.");return await this.db.isLeader()}async waitForLeadership(){if(!this.db)throw Error("Database not opened. Call open() first.");return await this.db.waitForLeadership()}async requestLeadership(){if(!this.db)throw Error("Database not opened. Call open() first.");return await this.db.requestLeadership()}async allowNonLeaderWrites(a){if(!this.db)throw Error("Database not opened. Call open() first.");return await this.db.allowNonLeaderWrites(a)}}a.s(["DatabaseClient",()=>c])},37811,a=>{"use strict";var b=a.i(22367),c=a.i(12102);function d({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,b.jsx)("table",{"data-slot":"table",className:(0,c.cn)("w-full caption-bottom text-sm",a),...d})})}function e({className:a,...d}){return(0,b.jsx)("thead",{"data-slot":"table-header",className:(0,c.cn)("[&_tr]:border-b",a),...d})}function f({className:a,...d}){return(0,b.jsx)("tbody",{"data-slot":"table-body",className:(0,c.cn)("[&_tr:last-child]:border-0",a),...d})}function g({className:a,...d}){return(0,b.jsx)("tr",{"data-slot":"table-row",className:(0,c.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",a),...d})}function h({className:a,...d}){return(0,b.jsx)("th",{"data-slot":"table-head",className:(0,c.cn)("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",a),...d})}function i({className:a,...d}){return(0,b.jsx)("td",{"data-slot":"table-cell",className:(0,c.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",a),...d})}a.s(["Table",()=>d,"TableBody",()=>f,"TableCell",()=>i,"TableHead",()=>h,"TableHeader",()=>e,"TableRow",()=>g])},5193,a=>{"use strict";var b=a.i(22367),c=a.i(12102);function d({className:a,type:d,...e}){return(0,b.jsx)("input",{type:d,"data-slot":"input",className:(0,c.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",a),...e})}a.s(["Input",()=>d])},97654,a=>{"use strict";var b=a.i(97863);let c=a=>{let b=a.replace(/^([A-Z])|[\s-_]+(\w)/g,(a,b,c)=>c?c.toUpperCase():b.toLowerCase());return b.charAt(0).toUpperCase()+b.slice(1)},d=(...a)=>a.filter((a,b,c)=>!!a&&""!==a.trim()&&c.indexOf(a)===b).join(" ").trim();var e={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let f=(0,b.forwardRef)(({color:a="currentColor",size:c=24,strokeWidth:f=2,absoluteStrokeWidth:g,className:h="",children:i,iconNode:j,...k},l)=>(0,b.createElement)("svg",{ref:l,...e,width:c,height:c,stroke:a,strokeWidth:g?24*Number(f)/Number(c):f,className:d("lucide",h),...!i&&!(a=>{for(let b in a)if(b.startsWith("aria-")||"role"===b||"title"===b)return!0})(k)&&{"aria-hidden":"true"},...k},[...j.map(([a,c])=>(0,b.createElement)(a,c)),...Array.isArray(i)?i:[i]])),g=(a,e)=>{let g=(0,b.forwardRef)(({className:g,...h},i)=>(0,b.createElement)(f,{ref:i,iconNode:e,className:d(`lucide-${c(a).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${a}`,g),...h}));return g.displayName=c(a),g};a.s(["default",()=>g],97654)},97232,a=>{"use strict";var b=a.i(97863),c=a.i(80010),d=a.i(90172),e=a=>{var e;let g,h,{present:i,children:j}=a,k=function(a){var c,e;let[g,h]=b.useState(),i=b.useRef(null),j=b.useRef(a),k=b.useRef("none"),[l,m]=(c=a?"mounted":"unmounted",e={mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}},b.useReducer((a,b)=>e[a][b]??a,c));return b.useEffect(()=>{let a=f(i.current);k.current="mounted"===l?a:"none"},[l]),(0,d.useLayoutEffect)(()=>{let b=i.current,c=j.current;if(c!==a){let d=k.current,e=f(b);a?m("MOUNT"):"none"===e||b?.display==="none"?m("UNMOUNT"):c&&d!==e?m("ANIMATION_OUT"):m("UNMOUNT"),j.current=a}},[a,m]),(0,d.useLayoutEffect)(()=>{if(g){let a,b=g.ownerDocument.defaultView??window,c=c=>{let d=f(i.current).includes(CSS.escape(c.animationName));if(c.target===g&&d&&(m("ANIMATION_END"),!j.current)){let c=g.style.animationFillMode;g.style.animationFillMode="forwards",a=b.setTimeout(()=>{"forwards"===g.style.animationFillMode&&(g.style.animationFillMode=c)})}},d=a=>{a.target===g&&(k.current=f(i.current))};return g.addEventListener("animationstart",d),g.addEventListener("animationcancel",c),g.addEventListener("animationend",c),()=>{b.clearTimeout(a),g.removeEventListener("animationstart",d),g.removeEventListener("animationcancel",c),g.removeEventListener("animationend",c)}}m("ANIMATION_END")},[g,m]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:b.useCallback(a=>{i.current=a?getComputedStyle(a):null,h(a)},[])}}(i),l="function"==typeof j?j({present:k.isPresent}):b.Children.only(j),m=(0,c.useComposedRefs)(k.ref,(e=l,(h=(g=Object.getOwnPropertyDescriptor(e.props,"ref")?.get)&&"isReactWarning"in g&&g.isReactWarning)?e.ref:(h=(g=Object.getOwnPropertyDescriptor(e,"ref")?.get)&&"isReactWarning"in g&&g.isReactWarning)?e.props.ref:e.props.ref||e.ref));return"function"==typeof j||k.isPresent?b.cloneElement(l,{ref:m}):null};function f(a){return a?.animationName||"none"}e.displayName="Presence",a.s(["Presence",()=>e])},2719,a=>{"use strict";var b=a.i(22367),c=a.i(97863);a.i(31442);var d=a.i(72185),e=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((a,e)=>{let f=(0,d.createSlot)(`Primitive.${e}`),g=c.forwardRef((a,c)=>{let{asChild:d,...g}=a;return(0,b.jsx)(d?f:e,{...g,ref:c})});return g.displayName=`Primitive.${e}`,{...a,[e]:g}},{}),f=c.forwardRef((a,c)=>(0,b.jsx)(e.label,{...a,ref:c,onMouseDown:b=>{b.target.closest("button, input, select, textarea")||(a.onMouseDown?.(b),!b.defaultPrevented&&b.detail>1&&b.preventDefault())}}));f.displayName="Label";var g=a.i(12102);function h({className:a,...c}){return(0,b.jsx)(f,{"data-slot":"label",className:(0,g.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",a),...c})}a.s(["Label",()=>h],2719)},82995,a=>{"use strict";var b=a.i(22367),c=a.i(97863),d=a.i(80010),e=a.i(60074),f=a.i(63095),g=a.i(44645),h=a.i(55055),i=a.i(50176),j=a.i(97232),k=a.i(96044),l="Checkbox",[m,n]=(0,e.createContextScope)(l),[o,p]=m(l);function q(a){let{__scopeCheckbox:d,checked:e,children:f,defaultChecked:h,disabled:i,form:j,name:k,onCheckedChange:m,required:n,value:p="on",internal_do_not_use_render:q}=a,[r,s]=(0,g.useControllableState)({prop:e,defaultProp:h??!1,onChange:m,caller:l}),[t,u]=c.useState(null),[v,w]=c.useState(null),x=c.useRef(!1),z=!t||!!j||!!t.closest("form"),A={checked:r,disabled:i,setChecked:s,control:t,setControl:u,name:k,form:j,value:p,hasConsumerStoppedPropagationRef:x,required:n,defaultChecked:!y(h)&&h,isFormControl:z,bubbleInput:v,setBubbleInput:w};return(0,b.jsx)(o,{scope:d,...A,children:"function"==typeof q?q(A):f})}var r="CheckboxTrigger",s=c.forwardRef(({__scopeCheckbox:a,onKeyDown:e,onClick:g,...h},i)=>{let{control:j,value:l,disabled:m,checked:n,required:o,setControl:q,setChecked:s,hasConsumerStoppedPropagationRef:t,isFormControl:u,bubbleInput:v}=p(r,a),w=(0,d.useComposedRefs)(i,q),x=c.useRef(n);return c.useEffect(()=>{let a=j?.form;if(a){let b=()=>s(x.current);return a.addEventListener("reset",b),()=>a.removeEventListener("reset",b)}},[j,s]),(0,b.jsx)(k.Primitive.button,{type:"button",role:"checkbox","aria-checked":y(n)?"mixed":n,"aria-required":o,"data-state":z(n),"data-disabled":m?"":void 0,disabled:m,value:l,...h,ref:w,onKeyDown:(0,f.composeEventHandlers)(e,a=>{"Enter"===a.key&&a.preventDefault()}),onClick:(0,f.composeEventHandlers)(g,a=>{s(a=>!!y(a)||!a),v&&u&&(t.current=a.isPropagationStopped(),t.current||a.stopPropagation())})})});s.displayName=r;var t=c.forwardRef((a,c)=>{let{__scopeCheckbox:d,name:e,checked:f,defaultChecked:g,required:h,disabled:i,value:j,onCheckedChange:k,form:l,...m}=a;return(0,b.jsx)(q,{__scopeCheckbox:d,checked:f,defaultChecked:g,disabled:i,required:h,onCheckedChange:k,name:e,form:l,value:j,internal_do_not_use_render:({isFormControl:a})=>(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(s,{...m,ref:c,__scopeCheckbox:d}),a&&(0,b.jsx)(x,{__scopeCheckbox:d})]})})});t.displayName=l;var u="CheckboxIndicator",v=c.forwardRef((a,c)=>{let{__scopeCheckbox:d,forceMount:e,...f}=a,g=p(u,d);return(0,b.jsx)(j.Presence,{present:e||y(g.checked)||!0===g.checked,children:(0,b.jsx)(k.Primitive.span,{"data-state":z(g.checked),"data-disabled":g.disabled?"":void 0,...f,ref:c,style:{pointerEvents:"none",...a.style}})})});v.displayName=u;var w="CheckboxBubbleInput",x=c.forwardRef(({__scopeCheckbox:a,...e},f)=>{let{control:g,hasConsumerStoppedPropagationRef:j,checked:l,defaultChecked:m,required:n,disabled:o,name:q,value:r,form:s,bubbleInput:t,setBubbleInput:u}=p(w,a),v=(0,d.useComposedRefs)(f,u),x=(0,h.usePrevious)(l),z=(0,i.useSize)(g);c.useEffect(()=>{if(!t)return;let a=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set,b=!j.current;if(x!==l&&a){let c=new Event("click",{bubbles:b});t.indeterminate=y(l),a.call(t,!y(l)&&l),t.dispatchEvent(c)}},[t,x,l,j]);let A=c.useRef(!y(l)&&l);return(0,b.jsx)(k.Primitive.input,{type:"checkbox","aria-hidden":!0,defaultChecked:m??A.current,required:n,disabled:o,name:q,value:r,form:s,...e,tabIndex:-1,ref:v,style:{...e.style,...z,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});function y(a){return"indeterminate"===a}function z(a){return y(a)?"indeterminate":a?"checked":"unchecked"}x.displayName=w;var A=a.i(51868),B=a.i(12102);function C({className:a,...c}){return(0,b.jsx)(t,{"data-slot":"checkbox",className:(0,B.cn)("peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",a),...c,children:(0,b.jsx)(v,{"data-slot":"checkbox-indicator",className:"grid place-content-center text-current transition-none",children:(0,b.jsx)(A.CheckIcon,{className:"size-3.5"})})})}a.s(["Checkbox",()=>C],82995)},69782,a=>{"use strict";var b=a.i(22367),c=a.i(97863),d=a.i(17766);let e=(0,c.createContext)(void 0);function f({children:a,dbName:f}){let[g,h]=(0,c.useState)(null),[i,j]=(0,c.useState)(!0),[k,l]=(0,c.useState)(null),m=async a=>{j(!0),l(null);try{let b=new d.DatabaseClient;await b.open(a),h(b),console.log(`DatabaseProvider: Initialized database "${a}"`)}catch(a){console.error("DatabaseProvider: Initialization failed:",a),l(a)}finally{j(!1)}};(0,c.useEffect)(()=>(m(f),()=>{g&&g.close().catch(a=>{console.error("DatabaseProvider: Failed to close database on unmount:",a)})}),[f]);let n=async a=>{g&&await g.close(),await m(a)};return(0,b.jsx)(e.Provider,{value:{db:g,loading:i,error:k,reinitialize:n},children:a})}function g(){let a=(0,c.useContext)(e);if(void 0===a)throw Error("useDatabase must be used within a DatabaseProvider");return a}a.s(["DatabaseProvider",()=>f,"useDatabase",()=>g])},70771,a=>{"use strict";var b=a.i(22367),c=a.i(97863),d=a.i(69782),e=a.i(23105);let f=(0,a.i(88229).create)(a=>({availableTables:[],selectedTables:[],setAvailableTables:b=>a({availableTables:b}),setSelectedTables:b=>a({selectedTables:b}),reset:()=>a({availableTables:[],selectedTables:[]})}));var g=a.i(57372),h=a.i(45061),i=a.i(5193),j=a.i(2719),k=a.i(82995),l=a.i(41313),m=a.i(37811);let n=a=>"Null"===a.type?null:a.value;function o(){let{db:a,loading:o,error:p}=(0,d.useDatabase)(),q=(0,e.useDatabaseStore)(a=>a.currentDbName),{availableTables:r,selectedTables:s,setAvailableTables:t,setSelectedTables:u}=f(),[v,w]=(0,c.useState)(""),[x,y]=(0,c.useState)([]),[z,A]=(0,c.useState)(!1),[B,C]=(0,c.useState)(null),[D,E]=(0,c.useState)(0),[F,G]=(0,c.useState)(!1),[H,I]=(0,c.useState)(!1),[J,K]=(0,c.useState)(!1),[L,M]=(0,c.useState)("all"),[N,O]=(0,c.useState)(!1),P=c.default.useRef(N),Q=c.default.useRef(z);P.current=N,Q.current=z,(0,c.useEffect)(()=>{},[a]),(0,c.useEffect)(()=>{},[]);let R=c.default.useCallback(async()=>{if(a)try{let b=(await a.execute(`
        SELECT name FROM sqlite_master 
        WHERE type='table' 
        AND name NOT LIKE 'sqlite_%'
        ORDER BY name
      `)).rows.map(a=>n(a.values[0]));t(b),u(b)}catch(a){console.error("Error loading tables:",a)}},[a]);(0,c.useEffect)(()=>{},[a,R]),(0,c.useEffect)(()=>{a&&q&&R()},[a,q,R]),(0,c.useEffect)(()=>{},[r]);let S=async()=>{if(a&&v.trim()){A(!0),C(null),y([]),O(!1);try{let b=[],c=f.getState(),d="all"===L?c.availableTables:c.selectedTables;for(let e of(console.log("[SEARCH] Executing search:",{searchScope:L,query:v,availableCount:c.availableTables.length,selectedCount:c.selectedTables.length,tablesToSearchCount:d.length,tablesToSearch:d}),d)){console.log("[SEARCH] Processing table:",e,"type:",typeof e);let c=(await a.execute(`PRAGMA table_info(${e})`)).rows.map(a=>({name:n(a.values[1]),type:n(a.values[2])})),d=c.find(a=>"id"===a.name||"rowid"===a.name)||c[0];for(let f of c){let c;if("BLOB"!==f.type.toUpperCase()){c=J?`SELECT * FROM ${e}`:H?F?`SELECT * FROM ${e} WHERE ${f.name} = '${v.replace(/'/g,"''")}'`:`SELECT * FROM ${e} WHERE LOWER(${f.name}) = LOWER('${v.replace(/'/g,"''")}')`:F?`SELECT * FROM ${e}`:`SELECT * FROM ${e} WHERE LOWER(${f.name}) LIKE LOWER('%${v.replace(/'/g,"''")}%')`;try{console.log("[SEARCH] Executing SQL:",c);let g=await a.execute(c);console.log("[SEARCH] SQL succeeded, rows:",g.rows.length);let h=g.columns.indexOf(d.name),i=g.columns.indexOf(f.name);for(let a of g.rows){let c=String(n(a.values[i])||""),d=n(a.values[h]);if(J)try{if(!new RegExp(v,F?"":"i").test(c))continue}catch(a){C("Invalid regex pattern"),A(!1);return}if(!J&&!H&&F&&!c.includes(v))continue;let j={};for(let b=0;b<g.columns.length;b++){let c=g.columns[b],d=n(a.values[b]);j[c]=d}b.push({table:e,column:f.name,rowId:d,value:c,matchedText:v,context:j})}}catch(a){console.error(`Error searching column ${f.name} in ${e}:`,a)}}}}y(b),E(b.length),O(!0),console.log("[SEARCH] Completed successfully:",{resultCount:b.length,showResults:!0})}catch(a){console.error("[SEARCH] Error:",a),C(a instanceof Error?a.message:"Search failed"),O(!0)}finally{A(!1)}}};return o?(0,b.jsx)("div",{className:"p-8",children:"Loading database..."}):p?(0,b.jsxs)("div",{className:"p-8 text-red-600",children:["Error: ",String(p)]}):q?(0,b.jsxs)("div",{className:"container mx-auto p-6 space-y-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold mb-2",children:"Full-Text Search"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Search for data across all tables and columns in your database"})]}),(0,b.jsxs)(h.Card,{children:[(0,b.jsxs)(h.CardHeader,{children:[(0,b.jsx)(h.CardTitle,{children:"Search"}),(0,b.jsx)(h.CardDescription,{children:"Enter your search query"})]}),(0,b.jsxs)(h.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(i.Input,{id:"searchInput",type:"text",placeholder:"Search for data...",value:v,onChange:a=>w(a.target.value),onKeyDown:a=>{"Enter"===a.key&&v.trim()&&S()},className:"flex-1"}),(0,b.jsx)(g.Button,{id:"searchButton",onClick:S,disabled:!v.trim()||z,children:z?"Searching...":"Search"}),N&&(0,b.jsx)(g.Button,{id:"clearResults",variant:"outline",onClick:()=>{y([]),O(!1),E(0),C(null)},children:"Clear"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 pt-4 border-t",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)(k.Checkbox,{id:"caseSensitive",checked:F,onCheckedChange:a=>G(a)}),(0,b.jsx)(j.Label,{htmlFor:"caseSensitive",className:"text-sm font-normal",children:"Case-sensitive"})]}),(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)(k.Checkbox,{id:"exactMatch",checked:H,onCheckedChange:a=>I(a)}),(0,b.jsx)(j.Label,{htmlFor:"exactMatch",className:"text-sm font-normal",children:"Exact match"})]}),(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)(k.Checkbox,{id:"useRegex",checked:J,onCheckedChange:a=>K(a)}),(0,b.jsx)(j.Label,{htmlFor:"useRegex",className:"text-sm font-normal",children:"Regex pattern"})]})]}),(0,b.jsxs)("div",{className:"space-y-3 pt-4 border-t",children:[(0,b.jsx)(j.Label,{htmlFor:"searchScope",children:"Search Scope"}),(0,b.jsxs)(l.Select,{value:L,onValueChange:a=>M(a),children:[(0,b.jsx)(l.SelectTrigger,{id:"searchScope",children:(0,b.jsx)(l.SelectValue,{placeholder:"Select scope"})}),(0,b.jsxs)(l.SelectContent,{children:[(0,b.jsx)(l.SelectItem,{value:"all",children:"All tables"}),(0,b.jsx)(l.SelectItem,{value:"selected",children:"Selected tables"})]})]}),"selected"===L&&(0,b.jsxs)("div",{className:"space-y-2 max-h-60 overflow-y-auto border rounded-md p-3",children:[(0,b.jsx)(j.Label,{className:"text-sm font-medium",children:"Select Tables"}),r.map(a=>(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)(k.Checkbox,{id:`table-${a}`,value:a,checked:s.includes(a),onCheckedChange:()=>{s.includes(a)?u(s.filter(b=>b!==a)):u([...s,a])}}),(0,b.jsx)(j.Label,{htmlFor:`table-${a}`,className:"text-sm font-normal cursor-pointer",children:a})]},a))]})]})]})]}),B&&(0,b.jsx)(h.Card,{className:"border-red-500",children:(0,b.jsx)(h.CardContent,{className:"pt-6",children:(0,b.jsx)("p",{className:"text-red-600",children:B})})}),N&&(0,b.jsxs)(h.Card,{id:"searchResults","data-testid":"search-results",children:[(0,b.jsx)(h.CardHeader,{children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(h.CardTitle,{children:"Search Results"}),(0,b.jsxs)(h.CardDescription,{id:"resultCount",children:[D," ",1===D?"result":"results"," found"]})]}),D>0&&(0,b.jsx)(g.Button,{id:"exportResults",variant:"outline",onClick:()=>{if(0===x.length)return;let a=new Blob(["Table,Column,Row ID,Value\n"+x.map(a=>`"${a.table}","${a.column}",${a.rowId},"${a.value.replace(/"/g,'""')}"`).join("\n")],{type:"text/csv"}),b=URL.createObjectURL(a),c=document.createElement("a");c.href=b,c.download=`search-results-${Date.now()}.csv`,c.click(),URL.revokeObjectURL(b)},children:"Export Results"})]})}),(0,b.jsx)(h.CardContent,{children:0===D?(0,b.jsx)("p",{className:"text-muted-foreground",children:"No results found"}):(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)(m.Table,{children:[(0,b.jsx)(m.TableHeader,{children:(0,b.jsxs)(m.TableRow,{children:[(0,b.jsx)(m.TableHead,{"data-column":"table",children:"Table"}),(0,b.jsx)(m.TableHead,{"data-column":"column",children:"Column"}),(0,b.jsx)(m.TableHead,{"data-column":"rowId",children:"Row ID"}),(0,b.jsx)(m.TableHead,{children:"Matched Value"})]})}),(0,b.jsx)(m.TableBody,{children:x.map((a,c)=>(0,b.jsxs)(m.TableRow,{children:[(0,b.jsx)(m.TableCell,{className:"result-table",children:a.table}),(0,b.jsx)(m.TableCell,{className:"result-column",children:a.column}),(0,b.jsx)(m.TableCell,{className:"row-id",children:a.rowId}),(0,b.jsx)(m.TableCell,{className:"max-w-md truncate",children:((a,c)=>{let d;if(!c||!a)return(0,b.jsx)("span",{children:a});if(J)try{let e=RegExp(`(${c})`,F?"g":"gi");d=a.split(e).map((a,c)=>e.test(a)?(0,b.jsx)("mark",{className:"bg-yellow-200 dark:bg-yellow-800",children:a},c):(0,b.jsx)("span",{children:a},c))}catch{return(0,b.jsx)("span",{children:a})}else{if(H)return(F?a===c:a.toLowerCase()===c.toLowerCase())?(0,b.jsx)("mark",{className:"bg-yellow-200 dark:bg-yellow-800",children:a}):(0,b.jsx)("span",{children:a});let e=RegExp(`(${c.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")})`,F?"g":"gi");d=a.split(e).map((a,d)=>(F?a===c:a.toLowerCase()===c.toLowerCase())?(0,b.jsx)("mark",{className:"bg-yellow-200 dark:bg-yellow-800",children:a},d):(0,b.jsx)("span",{children:a},d))}return(0,b.jsx)(b.Fragment,{children:d})})(a.value,a.matchedText)})]},c))})]})})})]})]}):(0,b.jsx)("div",{className:"p-8",children:(0,b.jsx)(h.Card,{children:(0,b.jsxs)(h.CardHeader,{children:[(0,b.jsx)(h.CardTitle,{children:"No Database Selected"}),(0,b.jsx)(h.CardDescription,{children:"Please create or load a database from the database management page."})]})})})}function p(){let a=(0,e.useDatabaseStore)(a=>a.currentDbName);return a?(0,b.jsx)(d.DatabaseProvider,{dbName:a,children:(0,b.jsx)(o,{})}):(0,b.jsx)("div",{className:"container mx-auto p-8",children:(0,b.jsx)("div",{className:"text-center text-gray-600",children:"No database selected. Please create or open a database first."})})}a.s(["default",()=>p],70771)},85002,a=>{a.v(a=>Promise.resolve().then(()=>a(69732)))}];

//# sourceMappingURL=pwa_29fa396a._.js.map