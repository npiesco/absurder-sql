{"version":3,"sources":["turbopack:///[project]/pwa/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-jsx-runtime.ts","turbopack:///[project]/pwa/lib/db/client.ts","turbopack:///[project]/pwa/app/hooks-test/page.tsx","turbopack:///[project]/pwa/lib/db/hooks.ts"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactJsxRuntime\n","import init, { Database, type QueryResult } from '@npiesco/absurder-sql';\n\nexport type { QueryResult };\n\nexport class DatabaseClient {\n  private db: Database | null = null;\n  private dbName: string | null = null;\n  private initialized: boolean = false;\n\n  /**\n   * Initialize the WASM module. This must be called before any database operations.\n   * Safe to call multiple times - will only initialize once.\n   */\n  async initialize(): Promise<void> {\n    if (this.initialized) {\n      return;\n    }\n\n    try {\n      await init();\n      this.initialized = true;\n    } catch (error) {\n      console.error('Failed to initialize WASM module:', error);\n      throw new Error(`WASM initialization failed: ${error}`);\n    }\n  }\n\n  /**\n   * Check if WASM module is initialized\n   */\n  isInitialized(): boolean {\n    return this.initialized;\n  }\n\n  /**\n   * Open a database by name. Creates a new database if it doesn't exist.\n   * @param dbName - Name of the database file (e.g., 'myapp.db')\n   */\n  async open(dbName: string): Promise<void> {\n    await this.initialize();\n\n    if (this.db) {\n      throw new Error('Database is already open. Close it first.');\n    }\n\n    try {\n      this.db = await Database.newDatabase(dbName);\n      this.dbName = dbName;\n      console.log(`DatabaseClient: Opened database \"${dbName}\"`);\n    } catch (error) {\n      console.error('DatabaseClient: Failed to open database:', error);\n      throw new Error(`Failed to open database: ${error}`);\n    }\n  }\n\n  /**\n   * Execute a SQL query with optional parameters\n   * @param sql - SQL query string\n   * @param params - Optional array of parameters for prepared statement\n   */\n  async execute(sql: string, params?: any[]): Promise<QueryResult> {\n    if (!this.db) {\n      throw new Error('Database not opened. Call open() first.');\n    }\n\n    try {\n      if (params && params.length > 0) {\n        return await this.db.executeWithParams(sql, params);\n      } else {\n        return await this.db.execute(sql);\n      }\n    } catch (error) {\n      console.error('Query execution failed:', error);\n      throw new Error(`Query failed: ${error}`);\n    }\n  }\n\n  /**\n   * Export database to a Blob (downloadable .db file)\n   */\n  async export(): Promise<Blob> {\n    if (!this.db) {\n      throw new Error('Database not opened. Call open() first.');\n    }\n\n    try {\n      const buffer = await this.db.exportToFile();\n      return new Blob([buffer as BlobPart], { type: 'application/x-sqlite3' });\n    } catch (error) {\n      console.error('Database export failed:', error);\n      throw new Error(`Export failed: ${error}`);\n    }\n  }\n\n  /**\n   * Import a database from a File\n   * Note: This closes the current database connection and reopens it with the imported data\n   * @param file - File object containing SQLite database\n   */\n  async import(file: File): Promise<void> {\n    if (!this.db || !this.dbName) {\n      throw new Error('Database not opened. Call open() first to create initial database instance.');\n    }\n\n    try {\n      const buffer = await file.arrayBuffer();\n      await this.db.importFromFile(new Uint8Array(buffer));\n      \n      // importFromFile closes the connection, must reopen with same name\n      console.log(`Import complete, reopening database \"${this.dbName}\"...`);\n      this.db = await Database.newDatabase(this.dbName);\n      console.log('Database reopened after import');\n    } catch (error) {\n      console.error('Database import failed:', error);\n      throw new Error(`Import failed: ${error}`);\n    }\n  }\n\n  /**\n   * Sync database to IndexedDB (flush WAL)\n   * Call this after writes to ensure data is persisted\n   */\n  async sync(): Promise<void> {\n    if (!this.db) {\n      throw new Error('Database not opened. Call open() first.');\n    }\n    try {\n      await this.db.sync();\n    } catch (error) {\n      console.error('Database sync failed:', error);\n      throw new Error(`Sync failed: ${error}`);\n    }\n  }\n\n  /**\n   * Close the database connection\n   */\n  async close(): Promise<void> {\n    if (this.db) {\n      try {\n        await this.db.close();\n        this.db = null;\n        this.dbName = null;\n      } catch (error) {\n        console.error('Database close failed:', error);\n        throw new Error(`Close failed: ${error}`);\n      }\n    }\n  }\n\n  /**\n   * Check if database is currently open\n   */\n  isOpen(): boolean {\n    return this.db !== null;\n  }\n\n  /**\n   * Get the current database name\n   */\n  getDatabaseName(): string | null {\n    return this.dbName;\n  }\n\n  /**\n   * Export database to a Blob with specified name\n   * Alias for export() method to match common naming conventions\n   */\n  async exportDatabase(): Promise<Blob> {\n    return this.export();\n  }\n\n  /**\n   * Import database from a Blob with a new database name\n   * Creates a new database and imports the data\n   */\n  async importDatabase(dbName: string, blob: Blob): Promise<void> {\n    await this.initialize();\n\n    // Close existing database if open\n    if (this.db) {\n      await this.close();\n    }\n\n    try {\n      // Create new database\n      this.db = await Database.newDatabase(dbName);\n      this.dbName = dbName;\n\n      // Import data\n      const buffer = await blob.arrayBuffer();\n      await this.db.importFromFile(new Uint8Array(buffer));\n      \n      // importFromFile closes the connection, must reopen\n      console.log(`Import complete, reopening database \"${dbName}\"...`);\n      this.db = await Database.newDatabase(dbName);\n      console.log('Database reopened after import');\n    } catch (error) {\n      console.error('Database import failed:', error);\n      this.db = null;\n      this.dbName = null;\n      throw new Error(`Import failed: ${error}`);\n    }\n  }\n\n  /**\n   * Delete a database by name\n   * Warning: This permanently removes the database from IndexedDB\n   */\n  async deleteDatabase(dbName: string): Promise<void> {\n    await this.initialize();\n\n    // Close if this is the current database\n    if (this.dbName === dbName && this.db) {\n      await this.close();\n    }\n\n    try {\n      // Delete from IndexedDB directly\n      const deleteRequest = indexedDB.deleteDatabase(dbName);\n      \n      await new Promise<void>((resolve, reject) => {\n        deleteRequest.onsuccess = () => {\n          console.log(`Deleted database \"${dbName}\"`);\n          resolve();\n        };\n        deleteRequest.onerror = () => {\n          reject(new Error(`Failed to delete database: ${deleteRequest.error}`));\n        };\n        deleteRequest.onblocked = () => {\n          console.warn(`Delete blocked for database \"${dbName}\". Close all connections first.`);\n        };\n      });\n    } catch (error) {\n      console.error(`Failed to delete database \"${dbName}\":`, error);\n      throw new Error(`Delete failed: ${error}`);\n    }\n  }\n\n  /**\n   * Get the current database instance (for advanced use)\n   */\n  getDatabase(): Database | null {\n    return this.db;\n  }\n\n  /**\n   * Check if this instance is the leader (can write to database)\n   */\n  async isLeader(): Promise<boolean> {\n    if (!this.db) {\n      throw new Error('Database not opened. Call open() first.');\n    }\n    return await this.db.isLeader();\n  }\n\n  /**\n   * Wait for this instance to become leader\n   */\n  async waitForLeadership(): Promise<void> {\n    if (!this.db) {\n      throw new Error('Database not opened. Call open() first.');\n    }\n    return await this.db.waitForLeadership();\n  }\n\n  /**\n   * Request leadership (triggers re-election)\n   */\n  async requestLeadership(): Promise<void> {\n    if (!this.db) {\n      throw new Error('Database not opened. Call open() first.');\n    }\n    return await this.db.requestLeadership();\n  }\n\n  /**\n   * Allow non-leader writes (for single-tab apps or testing)\n   */\n  async allowNonLeaderWrites(allow: boolean): Promise<void> {\n    if (!this.db) {\n      throw new Error('Database not opened. Call open() first.');\n    }\n    return await this.db.allowNonLeaderWrites(allow);\n  }\n}\n","'use client';\n\nimport { useEffect, useState } from 'react';\nimport { useDatabase, useQuery, useTransaction, useExport, useImport } from '@/lib/db/hooks';\n\nexport default function HooksTestPage() {\n  const { db, loading, error } = useDatabase('hooks_test.db');\n  const [loadingHistory, setLoadingHistory] = useState<boolean[]>([]);\n  const [useQueryData, setUseQueryData] = useState<any>(null);\n  const [useQueryLoading, setUseQueryLoading] = useState(false);\n  const [useQueryError, setUseQueryError] = useState<Error | null>(null);\n  const [useQueryRefetched, setUseQueryRefetched] = useState(false);\n  const [transactionSuccess, setTransactionSuccess] = useState(false);\n  const [transactionRolledBack, setTransactionRolledBack] = useState(false);\n  const [importSuccess, setImportSuccess] = useState(false);\n\n  const { execute: executeTransaction, pending: transactionPending } = useTransaction();\n  const { exportDb } = useExport();\n  const { importDb } = useImport();\n\n  // Track loading history\n  useEffect(() => {\n    setLoadingHistory(prev => [...prev, loading]);\n  }, [loading]);\n\n  // Expose state to window for tests\n  useEffect(() => {\n    if (typeof window !== 'undefined') {\n      (window as any).testDb = db;\n      (window as any).testLoading = loading;\n      (window as any).testError = error;\n      (window as any).loadingHistory = loadingHistory;\n      (window as any).useQueryData = useQueryData;\n      (window as any).useQueryLoading = useQueryLoading;\n      (window as any).useQueryError = useQueryError;\n      (window as any).useQueryRefetched = useQueryRefetched;\n      (window as any).transactionSuccess = transactionSuccess;\n      (window as any).transactionRolledBack = transactionRolledBack;\n      (window as any).importSuccess = importSuccess;\n    }\n  }, [db, loading, error, loadingHistory, useQueryData, useQueryLoading, useQueryError, useQueryRefetched, transactionSuccess, transactionRolledBack, importSuccess]);\n\n  const handleTestUseQuery = async () => {\n    if (!db) return;\n\n    try {\n      setUseQueryLoading(true);\n      await db.execute('DROP TABLE IF EXISTS query_test');\n      await db.execute('CREATE TABLE query_test (id INTEGER, name TEXT)');\n      await db.execute('INSERT INTO query_test VALUES (?, ?)', [\n        { type: 'Integer', value: 1 },\n        { type: 'Text', value: 'Test Data' }\n      ]);\n\n      const result = await db.execute('SELECT * FROM query_test');\n      setUseQueryData(result.rows);\n      setUseQueryError(null);\n    } catch (err) {\n      setUseQueryError(err as Error);\n    } finally {\n      setUseQueryLoading(false);\n    }\n  };\n\n  const handleTestUseQueryRefetch = async () => {\n    if (!db) return;\n    await handleTestUseQuery();\n    setUseQueryRefetched(true);\n  };\n\n  const handleTestTransaction = async () => {\n    try {\n      await executeTransaction([\n        { sql: 'DROP TABLE IF EXISTS transaction_test' },\n        { sql: 'CREATE TABLE transaction_test (id INTEGER, value TEXT)' },\n        { \n          sql: 'INSERT INTO transaction_test VALUES (?, ?)',\n          params: [\n            { type: 'Integer', value: 1 },\n            { type: 'Text', value: 'Transaction Data' }\n          ]\n        }\n      ]);\n      setTransactionSuccess(true);\n    } catch (err) {\n      console.error('Transaction failed:', err);\n    }\n  };\n\n  const handleTestTransactionRollback = async () => {\n    try {\n      await executeTransaction([\n        { sql: 'DROP TABLE IF EXISTS rollback_test' },\n        { sql: 'CREATE TABLE rollback_test (id INTEGER)' },\n        { sql: 'INSERT INTO rollback_test VALUES (1)' },\n        { sql: 'INVALID SQL SYNTAX' } // This will cause rollback\n      ]);\n    } catch (err) {\n      // Expected to fail\n      setTransactionRolledBack(true);\n    }\n  };\n\n  const handleTestExport = async () => {\n    await exportDb('hooks_test.db');\n  };\n\n  const handleTestImport = async () => {\n    const realFile = (window as any).realExportFile;\n    if (realFile) {\n      try {\n        await importDb(realFile);\n        setImportSuccess(true);\n      } catch (err) {\n        console.error('Import failed:', err);\n      }\n    }\n  };\n\n  return (\n    <div style={{ padding: '20px', fontFamily: 'system-ui' }}>\n      <h1>Hooks Test Page</h1>\n      \n      <p id=\"status\">\n        {loading ? 'Loading...' : error ? `Error: ${error.message}` : 'Database ready'}\n      </p>\n\n      <div style={{ marginTop: '20px' }}>\n        <button id=\"testUseQuery\" onClick={handleTestUseQuery} disabled={!db}>\n          Test useQuery\n        </button>\n        <button id=\"testUseQueryRefetch\" onClick={handleTestUseQueryRefetch} disabled={!db}>\n          Test useQuery Refetch\n        </button>\n        <p id=\"useQueryResult\">\n          {useQueryLoading ? 'Loading query...' : useQueryData ? (useQueryRefetched ? 'Refetch complete' : 'useQuery complete') : ''}\n        </p>\n      </div>\n\n      <div style={{ marginTop: '20px' }}>\n        <button id=\"testTransaction\" onClick={handleTestTransaction} disabled={!db || transactionPending}>\n          Test Transaction\n        </button>\n        <button id=\"testTransactionRollback\" onClick={handleTestTransactionRollback} disabled={!db || transactionPending}>\n          Test Transaction Rollback\n        </button>\n        <p id=\"transactionResult\">\n          {transactionSuccess ? 'Transaction complete' : transactionRolledBack ? 'Rollback successful' : ''}\n        </p>\n      </div>\n\n      <div style={{ marginTop: '20px' }}>\n        <button id=\"testExport\" onClick={handleTestExport} disabled={!db}>\n          Test Export\n        </button>\n      </div>\n\n      <div style={{ marginTop: '20px' }}>\n        <button id=\"testImport\" onClick={handleTestImport} disabled={!db}>\n          Test Import\n        </button>\n        <p id=\"importResult\">\n          {importSuccess ? 'Import complete' : ''}\n        </p>\n      </div>\n    </div>\n  );\n}\n","'use client';\n\nimport { useEffect, useState, useCallback } from 'react';\nimport { DatabaseClient, type QueryResult } from './client';\n\n// Singleton database client\nlet dbClient: DatabaseClient | null = null;\n\nexport interface UseDatabaseReturn {\n  db: DatabaseClient | null;\n  loading: boolean;\n  error: Error | null;\n}\n\nexport function useDatabase(dbName: string): UseDatabaseReturn {\n  const [db, setDb] = useState<DatabaseClient | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<Error | null>(null);\n\n  useEffect(() => {\n    let mounted = true;\n\n    async function openDb() {\n      try {\n        if (!dbClient) {\n          dbClient = new DatabaseClient();\n        }\n        \n        await dbClient.open(dbName);\n        \n        if (mounted) {\n          setDb(dbClient);\n          setLoading(false);\n        }\n      } catch (err) {\n        console.error('useDatabase error:', err);\n        if (mounted) {\n          setError(err as Error);\n          setLoading(false);\n        }\n      }\n    }\n\n    openDb();\n\n    return () => {\n      mounted = false;\n    };\n  }, [dbName]);\n\n  return { db, loading, error };\n}\n\nexport interface UseQueryReturn<T = any> {\n  data: T | null;\n  loading: boolean;\n  error: Error | null;\n  refetch: () => Promise<void>;\n}\n\nexport function useQuery<T = any>(\n  sql: string,\n  params?: any[]\n): UseQueryReturn<T> {\n  const [data, setData] = useState<T | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<Error | null>(null);\n\n  const fetchData = useCallback(async () => {\n    if (!dbClient) {\n      setError(new Error('Database not initialized'));\n      setLoading(false);\n      return;\n    }\n\n    try {\n      setLoading(true);\n      const result = await dbClient.execute(sql, params);\n      setData(result.rows as T);\n      setError(null);\n    } catch (err) {\n      console.error('useQuery error:', err);\n      setError(err as Error);\n    } finally {\n      setLoading(false);\n    }\n  }, [sql, JSON.stringify(params)]);\n\n  useEffect(() => {\n    fetchData();\n  }, [fetchData]);\n\n  return { data, loading, error, refetch: fetchData };\n}\n\nexport interface UseTransactionReturn {\n  execute: (queries: Array<{ sql: string; params?: any[] }>) => Promise<void>;\n  pending: boolean;\n  error: Error | null;\n}\n\nexport function useTransaction(): UseTransactionReturn {\n  const [pending, setPending] = useState(false);\n  const [error, setError] = useState<Error | null>(null);\n\n  const execute = useCallback(\n    async (queries: Array<{ sql: string; params?: any[] }>) => {\n      if (!dbClient) {\n        throw new Error('Database not initialized');\n      }\n\n      setPending(true);\n      setError(null);\n\n      try {\n        await dbClient.execute('BEGIN TRANSACTION');\n\n        for (const query of queries) {\n          await dbClient.execute(query.sql, query.params);\n        }\n\n        await dbClient.execute('COMMIT');\n      } catch (err) {\n        console.error('Transaction error:', err);\n        try {\n          await dbClient.execute('ROLLBACK');\n        } catch (rollbackErr) {\n          console.error('Rollback error:', rollbackErr);\n        }\n        setError(err as Error);\n        throw err;\n      } finally {\n        setPending(false);\n      }\n    },\n    []\n  );\n\n  return { execute, pending, error };\n}\n\nexport interface UseExportReturn {\n  exportDb: (filename?: string) => Promise<void>;\n  loading: boolean;\n  error: Error | null;\n}\n\nexport function useExport(): UseExportReturn {\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<Error | null>(null);\n\n  const exportDb = useCallback(async (filename: string = 'database.db') => {\n    if (!dbClient) {\n      throw new Error('Database not initialized');\n    }\n\n    setLoading(true);\n    setError(null);\n\n    try {\n      const blob = await dbClient.export();\n      const url = URL.createObjectURL(blob);\n      const a = document.createElement('a');\n      a.href = url;\n      a.download = filename;\n      a.click();\n      URL.revokeObjectURL(url);\n    } catch (err) {\n      console.error('Export error:', err);\n      setError(err as Error);\n      throw err;\n    } finally {\n      setLoading(false);\n    }\n  }, []);\n\n  return { exportDb, loading, error };\n}\n\nexport interface UseImportReturn {\n  importDb: (file: File) => Promise<void>;\n  loading: boolean;\n  progress: number;\n  error: Error | null;\n}\n\nexport function useImport(): UseImportReturn {\n  const [loading, setLoading] = useState(false);\n  const [progress, setProgress] = useState(0);\n  const [error, setError] = useState<Error | null>(null);\n\n  const importDb = useCallback(async (file: File) => {\n    if (!dbClient) {\n      throw new Error('Database not initialized');\n    }\n\n    setLoading(true);\n    setProgress(0);\n    setError(null);\n\n    try {\n      setProgress(50);\n      await dbClient.import(file);\n      setProgress(100);\n    } catch (err) {\n      console.error('Import error:', err);\n      setError(err as Error);\n      throw err;\n    } finally {\n      setLoading(false);\n    }\n  }, []);\n\n  return { importDb, loading, progress, error };\n}\n"],"names":["module","exports","require","vendored","ReactJsxRuntime"],"mappings":"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","ignoreList":[0]}